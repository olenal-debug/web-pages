<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Review Agent - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Public+Sans:wght@600&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            /* Colors */
            --bg-primary: #0f0f0f;
            --bg-secondary: #141414;
            --bg-2: #1a1a1a;
            --bg-3: #292929;
            --bg-4: #333333;
            --bg-5: #44484a;
            
            --text-primary: #ffffff;
            --text-secondary: #e5e5e5;
            --text-placeholder: #a3a3a3;
            --text-muted: #a3a3a3;
            
            --border-primary: #333333;
            --border-secondary: #424242;
            
            --accent-blue: #2f78f6;
            --accent-primary: #007acc;
            --accent-success: #66c61c;
            
            --gradient-start: #4776e6;
            --gradient-end: #8e54e9;
            
            /* Spacing */
            --spacing-xs: 4px;
            --spacing-s: 6px;
            --spacing-md: 8px;
            --spacing-lg: 12px;
            --spacing-xl: 16px;
            --spacing-2xl: 24px;
            
            /* Radius */
            --radius-xs: 3px;
            --radius-sm: 4px;
            --radius-md: 6px;
            --radius-full: 9999px;
            
            /* Fonts */
            --font-inter: 'Inter', sans-serif;
            --font-public-sans: 'Public Sans', sans-serif;
        }

        body {
            font-family: var(--font-inter);
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow: hidden;
            height: 100vh;
        }

        .app-container {
            display: flex;
            height: 100vh;
            width: 100vw;
        }

        /* Sidebar */
        .sidebar {
            width: 280px;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            padding-bottom: var(--spacing-md);
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            height: 64px;
            padding: var(--spacing-md);
            display: flex;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex: 1;
            padding: var(--spacing-xs);
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--accent-blue);
            border-radius: var(--radius-xs);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-public-sans);
            font-weight: 600;
            font-size: 16px;
            color: var(--text-primary);
            flex-shrink: 0;
        }

        .user-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .user-name {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
            line-height: 1;
        }

        .plan-badge {
            background: linear-gradient(to right, var(--gradient-start), var(--gradient-end));
            padding: 2px var(--spacing-xs);
            border-radius: var(--radius-sm);
            font-size: 10px;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1;
        }

        .chevron-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
            opacity: 0.6;
        }

        .menu-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
            padding: 0 var(--spacing-md);
        }

        .menu-group-title {
            padding: 10px var(--spacing-md) 2px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .menu-item {
            height: 36px;
            padding: var(--spacing-md) var(--spacing-lg) var(--spacing-md) var(--spacing-md);
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: background 0.2s;
        }

        .menu-item:hover {
            background: rgba(255, 255, 255, 0.04);
        }

        .menu-item.active {
            background: rgba(255, 255, 255, 0.08);
        }

        .menu-item-icon {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            opacity: 0.6;
        }

        .menu-item.active .menu-item-icon {
            opacity: 1;
        }

        .menu-item-text {
            flex: 1;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .menu-item.active .menu-item-text {
            color: var(--text-primary);
        }

        .menu-item-chevron {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            opacity: 0.6;
        }

        .sidebar-footer {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
            padding: 0 var(--spacing-md);
        }

        .divider {
            height: 1px;
            background: var(--bg-4);
            margin: var(--spacing-xs) 0;
        }

        .collapse-button {
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: var(--radius-md);
            transition: background 0.2s;
        }

        .collapse-button:hover {
            background: rgba(255, 255, 255, 0.04);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            background: var(--bg-secondary);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .page-header {
            border-bottom: 1px solid var(--border-primary);
            padding: var(--spacing-md) var(--spacing-2xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
        }

        .page-title {
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .header-links {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .gitlab-badge {
            border: 1px solid var(--border-secondary);
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            height: 24px;
        }

        .gitlab-icon {
            width: 16px;
            height: 16px;
        }

        .gitlab-text {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--accent-success);
            border-radius: 50%;
        }

        .header-spacer {
            flex: 1;
        }

        .help-button {
            width: 24px;
            height: 24px;
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.2s;
        }

        .help-button:hover {
            background: rgba(255, 255, 255, 0.04);
        }

        .page-content {
            padding: var(--spacing-xl) var(--spacing-2xl);
            padding-bottom: 80px;
            overflow-y: auto;
            flex: 1;
        }

        .config-toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
        }

        .search-input {
            width: 196px;
            height: 24px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs) var(--spacing-s);
            display: flex;
            align-items: center;
            gap: var(--spacing-s);
        }

        .search-icon {
            width: 16px;
            height: 16px;
            opacity: 0.6;
        }

        .search-input input {
            flex: 1;
            background: transparent;
            border: none;
            outline: none;
            color: var(--text-primary);
            font-size: 12px;
            font-family: var(--font-inter);
        }

        .search-input input::placeholder {
            color: var(--text-placeholder);
        }

        .toolbar-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .repos-count {
            font-size: 12px;
            color: var(--text-muted);
        }

        .button {
            height: 24px;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 12px;
            font-weight: 500;
            font-family: var(--font-inter);
            border: 1px solid var(--border-secondary);
            background: rgba(255, 255, 255, 0.04);
            color: var(--text-secondary);
        }

        .button:hover:not(:disabled) {
            background: rgba(255, 255, 255, 0.08);
        }

        .button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .button-primary {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: var(--text-primary);
        }

        .button-primary:hover:not(:disabled) {
            background: #0088dd;
        }

        .button-icon {
            width: 16px;
            height: 16px;
        }

        .config-banner {
            background: var(--bg-3);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg) var(--spacing-2xl);
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: var(--spacing-xl);
        }

        .banner-text {
            flex: 1;
            font-size: 14px;
            color: var(--text-primary);
        }

        .banner-actions {
            display: flex;
            gap: var(--spacing-md);
        }

        .table-container {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            overflow: hidden;
        }

        .table-header {
            background: var(--bg-4);
            padding: var(--spacing-lg) var(--spacing-2xl);
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
            border-bottom: 1px solid var(--border-primary);
        }

        .table-header-cell {
            font-size: 12px;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: var(--spacing-xs);
        }

        .table-header-cell:first-child {
            flex: 1;
        }

        .table-header-cell:nth-child(2),
        .table-header-cell:nth-child(3),
        .table-header-cell:nth-child(4) {
            width: 200px;
        }

        .table-body {
            display: flex;
            flex-direction: column;
        }

        .table-row {
            padding: 0 var(--spacing-2xl);
            height: 40px;
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
            border-bottom: 1px solid var(--border-primary);
            transition: background 0.2s;
        }

        .table-row:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .table-row:last-child {
            border-bottom: none;
        }

        .table-cell {
            font-size: 14px;
            color: var(--text-primary);
        }

        .table-cell:first-child {
            flex: 1;
            display: flex;
            align-items: center;
            gap: var(--spacing-xl);
        }

        .table-cell:nth-child(2),
        .table-cell:nth-child(3),
        .table-cell:nth-child(4) {
            width: 200px;
        }

        .checkbox {
            width: 16px;
            height: 16px;
            border: 1.5px solid var(--text-muted);
            border-radius: var(--radius-xs);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .checkbox:hover {
            border-color: var(--text-primary);
        }

        .checkbox.checked {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
        }

        .checkbox.checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: var(--text-primary);
            font-size: 12px;
        }

        .toggle-switch {
            width: 28px;
            height: 16px;
            background: var(--bg-5);
            border-radius: var(--radius-full);
            position: relative;
            cursor: pointer;
            transition: background 0.2s;
            padding: 2px;
        }

        .toggle-switch.active {
            background: var(--accent-success);
        }

        .toggle-knob {
            width: 12px;
            height: 12px;
            background: #c4c9cc;
            border-radius: 50%;
            position: absolute;
            left: 2px;
            top: 50%;
            transform: translateY(-50%);
            transition: transform 0.2s;
        }

        .toggle-switch.active .toggle-knob {
            transform: translate(12px, -50%);
            background: var(--text-primary);
        }

        .settings-button {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: var(--radius-sm);
            transition: background 0.2s;
        }

        .settings-button:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .pagination {
            padding: var(--spacing-lg) var(--spacing-2xl);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--border-primary);
        }

        .pagination-left {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .pagination-button {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: background 0.2s;
        }

        .pagination-button:hover {
            background: rgba(255, 255, 255, 0.04);
        }

        .pagination-button.active {
            background: var(--bg-4);
        }

        .pagination-numbers {
            display: flex;
            gap: var(--spacing-xs);
            align-items: center;
        }

        .pagination-number {
            min-width: 32px;
            height: 24px;
            padding: var(--spacing-xs) var(--spacing-md);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: background 0.2s;
            font-size: 12px;
            font-weight: 500;
        }

        .pagination-number:hover {
            background: rgba(255, 255, 255, 0.04);
        }

        .pagination-number.active {
            background: var(--bg-4);
            color: var(--text-primary);
        }

        .pagination-number:not(.active) {
            color: var(--text-muted);
        }

        .pagination-right {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            font-size: 12px;
            color: var(--text-muted);
        }

        .pagination-select {
            width: 60px;
            height: 24px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs) var(--spacing-s);
            color: var(--text-placeholder);
            font-size: 12px;
            font-family: var(--font-inter);
        }

        .divider-vertical {
            width: 1px;
            background: var(--bg-4);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-2xl);
            min-width: 400px;
            max-width: 500px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-xl);
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .modal-close {
            width: 24px;
            height: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: var(--radius-sm);
            transition: background 0.2s;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .modal-body {
            margin-bottom: var(--spacing-xl);
        }

        .modal-input {
            width: 100%;
            height: 32px;
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            color: var(--text-primary);
            font-size: 14px;
            font-family: var(--font-inter);
            margin-bottom: var(--spacing-md);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .modal-input::placeholder {
            color: var(--text-placeholder);
        }

        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: var(--spacing-md);
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-md) var(--spacing-lg);
            display: none;
            align-items: center;
            gap: var(--spacing-md);
            z-index: 1001;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
        }

        .toast.active {
            display: flex;
        }

        .toast.success {
            border-left: 3px solid var(--accent-success);
        }

        .toast.info {
            border-left: 3px solid var(--accent-primary);
        }

        .toast-message {
            font-size: 14px;
            color: var(--text-primary);
        }

        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid var(--text-muted);
            border-top-color: var(--accent-primary);
            border-radius: 50%;
            animation: spin 0.6s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes barGrow {
            from {
                height: 0;
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .content-section {
            width: 100%;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Analytics Styles */
        .stat-card {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            font-weight: 500;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 600;
            color: var(--text-primary);
            line-height: 1.2;
        }

        .stat-change {
            font-size: 12px;
            margin-top: var(--spacing-xs);
        }

        .stat-change.positive {
            color: var(--accent-success);
        }

        .stat-change.negative {
            color: #ff4d4d;
        }

        .chart-container {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
        }

        .chart-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .chart-period-select {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-secondary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-xs) var(--spacing-md);
            color: var(--text-primary);
            font-size: 12px;
            font-family: var(--font-inter);
            cursor: pointer;
        }

        .chart-body {
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            gap: var(--spacing-md);
            height: 200px;
            width: 100%;
        }

        .bar {
            flex: 1;
            background: linear-gradient(to top, var(--accent-primary), var(--accent-blue));
            border-radius: var(--radius-xs) var(--radius-xs) 0 0;
            position: relative;
            min-width: 20px;
            transition: opacity 0.2s;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .bar-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: var(--text-muted);
            white-space: nowrap;
        }

        .bar-value {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 11px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .pie-chart {
            width: 180px;
            height: 180px;
            position: relative;
            margin: 0 auto;
            border-radius: 50%;
            overflow: hidden;
        }

        .pie-chart-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .pie-segment {
            transition: opacity 0.2s;
        }

        .pie-segment:hover {
            opacity: 0.9;
        }

        .pie-legend {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }

        .pie-legend-item {
            display: flex;
            align-items: flex-start;
            gap: var(--spacing-md);
            font-size: 12px;
            transition: background 0.2s;
            border-radius: var(--radius-xs);
            padding: var(--spacing-xs);
            margin: 0 calc(-1 * var(--spacing-xs));
        }

        .pie-legend-item:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .pie-legend-color {
            width: 10px;
            height: 10px;
            border-radius: 2px;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .reviewer-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: var(--spacing-md);
            border-bottom: 1px solid var(--border-primary);
        }

        .reviewer-item:last-child {
            border-bottom: none;
        }

        .reviewer-info {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
            flex: 1;
        }

        .reviewer-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--accent-blue);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .reviewer-details {
            flex: 1;
        }

        .reviewer-name {
            font-size: 14px;
            color: var(--text-primary);
            font-weight: 500;
        }

        .reviewer-email {
            font-size: 12px;
            color: var(--text-muted);
        }

        .reviewer-stats {
            text-align: right;
        }

        .reviewer-count {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .reviewer-label {
            font-size: 11px;
            color: var(--text-muted);
        }

        /* Subscription Styles */
        .plan-card {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            transition: all 0.2s;
            cursor: pointer;
        }

        .plan-card:hover {
            border-color: var(--accent-primary);
            background: rgba(47, 120, 246, 0.05);
        }

        .plan-card.active {
            border-color: var(--accent-primary);
            background: rgba(47, 120, 246, 0.1);
        }

        /* Help Styles */
        .help-card {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            display: flex;
            flex-direction: column;
            transition: all 0.2s;
        }

        .help-card:hover {
            border-color: var(--accent-primary);
            background: rgba(47, 120, 246, 0.05);
        }

        .faq-item {
            background: var(--bg-2);
            border: 1px solid var(--border-primary);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            cursor: pointer;
            transition: all 0.2s;
        }

        .faq-item:hover {
            border-color: var(--accent-primary);
            background: rgba(47, 120, 246, 0.05);
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .faq-answer {
            margin-top: var(--spacing-md);
            font-size: 13px;
            color: var(--text-muted);
            line-height: 1.6;
            display: none;
        }

        .faq-item.expanded .faq-answer {
            display: block;
        }

        .faq-icon {
            transition: transform 0.2s;
        }

        .faq-item.expanded .faq-icon {
            transform: rotate(180deg);
        }

        /* Icons - using simple SVG placeholders */
        .icon {
            width: 100%;
            height: 100%;
            opacity: 0.6;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header">
                <div class="user-info">
                    <div class="user-avatar">AA</div>
                    <div class="user-details">
                        <div class="user-name">CompanyName</div>
                        <div class="plan-badge">10X DEVELOPER</div>
                    </div>
                    <svg class="chevron-icon" viewBox="0 0 24 24" fill="none">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            
            <div class="menu-section">
                <div class="menu-group-title">Code Review</div>
                <div class="menu-item active" data-menu="repositories">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 6a2 2 0 012-2h5l2 2h5a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V6z"/>
                    </svg>
                    <span class="menu-item-text">Repositories</span>
                </div>
                <div class="menu-item" data-menu="rules">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M3 4h14M3 8h14M3 12h14M3 16h14" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span class="menu-item-text">Review Rules</span>
                </div>
                
                <div class="menu-group-title">Dashboard</div>
                <div class="menu-item" data-menu="analytics">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 2L3 7v11h14V7l-7-5z"/>
                    </svg>
                    <span class="menu-item-text">Code Review Analytics</span>
                    <svg class="menu-item-chevron" viewBox="0 0 20 20" fill="none">
                        <path d="M7 5l5 5-5 5" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
                <div class="menu-item" data-menu="chat">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2 5a2 2 0 012-2h7a2 2 0 012 2v4a2 2 0 01-2 2H9l-3 3v-3H4a2 2 0 01-2-2V5z"/>
                        <path d="M15 7v2a4 4 0 01-4 4H9.828l-2.586 2.586A1 1 0 006 17h4a4 4 0 004-4V7a4 4 0 00-4-4h-2a4 4 0 00-4 4v2"/>
                    </svg>
                    <span class="menu-item-text">Chat Analytics</span>
                </div>
                
                <div class="menu-group-title">Integrations</div>
                <div class="menu-item" data-menu="git">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M2.6 10.59L8.38 4.8l1.69 1.7c-.24.85.15 1.78.93 2.23l1.48 1.48c1.12.82 2.69.64 3.58-.28l4.59-4.59c.37-.37.58-.88.58-1.41 0-.53-.21-1.04-.58-1.41l-1.47-1.47c-.37-.37-.88-.58-1.41-.58-.53 0-1.04.21-1.41.58l-4.59 4.59c-.92.89-1.1 2.46-.28 3.58l1.48 1.48c.45.78 1.38 1.17 2.23.93l1.7 1.69-5.79 5.79c-.39.39-1.02.39-1.41 0l-2.12-2.12a.996.996 0 010-1.41z"/>
                    </svg>
                    <span class="menu-item-text">Git</span>
                </div>
            </div>
            
            <div class="sidebar-footer">
                <div class="menu-item" data-menu="users">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
                    </svg>
                    <span class="menu-item-text">Manage Users</span>
                </div>
                <div class="menu-item" data-menu="subscription">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4zM18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z"/>
                    </svg>
                    <span class="menu-item-text">Manage Subscription</span>
                </div>
                <div class="divider"></div>
                <div class="menu-item" data-menu="help">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z" clip-rule="evenodd"/>
                    </svg>
                    <span class="menu-item-text">Help</span>
                </div>
                <div class="menu-item" data-menu="settings">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"/>
                    </svg>
                    <span class="menu-item-text">Settings</span>
                </div>
                <div class="collapse-button" data-action="collapse">
                    <svg class="menu-item-icon" viewBox="0 0 20 20" fill="none">
                        <path d="M12 5l-5 5 5 5" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </div>
            </div>
        </div>
        
        <div class="divider-vertical"></div>
        
        <!-- Main Content -->
        <div class="main-content">
            <div class="page-header">
                <div class="page-title">Code Review Agent</div>
                <div class="header-links">
                    <div class="gitlab-badge">
                        <svg class="gitlab-icon" viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 0L5.5 5.5H2.5L0 0h8zM8 0l2.5 5.5h3L16 0H8zM8 0l-1 2H1l1 2h6L8 0z"/>
                        </svg>
                        <span class="gitlab-text">[GitLab organizaiton name]</span>
                        <div class="status-dot"></div>
                    </div>
                    <div class="help-button" title="Help">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 12V8M8 4h.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </div>
                </div>
            </div>
            
            <div class="page-content">
                <!-- Repositories Section -->
                <div id="repositories-section" class="content-section">
                <div class="config-toolbar">
                    <div class="search-input">
                        <svg class="search-icon" viewBox="0 0 16 16" fill="none">
                            <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                            <path d="m11 11 3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                        <input type="text" placeholder="Search repositories">
                    </div>
                    <div class="toolbar-right">
                        <span class="repos-count">0 of 128 repositories enabled</span>
                        <button class="button" data-action="add-repos">
                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Add repositories
                        </button>
                        <button class="button" data-action="refresh">
                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                <path d="M1 8a7 7 0 0114 0M1 8l3-3m-3 3l3 3M15 8l-3-3m3 3l-3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            Refresh repositories list
                        </button>
                    </div>
                </div>
                
                <div class="config-banner">
                    <div class="banner-text">All the repositories are using organization agent settings for code review.</div>
                    <div class="banner-actions">
                        <button class="button" data-action="add-agent">
                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            Add new agent
                        </button>
                        <button class="button" data-action="clone-agent">
                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                <rect x="5" y="2" width="9" height="9" rx="1" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M2 6v8a1 1 0 001 1h8" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Clone this agent
                        </button>
                        <button class="button button-primary" data-action="change-settings">
                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                            Change agent settings
                        </button>
                    </div>
                </div>
                
                <div class="table-container">
                    <div class="table-header">
                        <div class="table-header-cell">
                            <div class="checkbox" data-select-all></div>
                            Repository
                        </div>
                        <div class="table-header-cell">Last reviewed</div>
                        <div class="table-header-cell">Last commit</div>
                        <div class="table-header-cell">Code review status</div>
                        <div style="width: 24px;"></div>
                    </div>
                    <div class="table-body" id="tableBody">
                        <!-- Rows will be generated by JavaScript -->
                    </div>
                    <div class="pagination">
                        <div class="pagination-left">
                            <div class="pagination-button" data-page="prev">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M10 12l-4-4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <div class="pagination-numbers">
                                <div class="pagination-number active" data-page="1">1</div>
                                <div class="pagination-number" data-page="2">2</div>
                                <div class="pagination-number" data-page="3">3</div>
                                <div class="pagination-number" data-page="...">...</div>
                            </div>
                            <div class="pagination-button" data-page="next">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M6 4l4 4-4 4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="pagination-right">
                            <span>Show</span>
                            <select class="pagination-select">
                                <option>10</option>
                                <option>20</option>
                                <option>50</option>
                            </select>
                            <span>of 86 repositories</span>
                        </div>
                    </div>
                </div>
                </div>
                <!-- Review Rules Section -->
                <div id="review-rules-section" class="content-section" style="display: none;">
                    <div class="config-toolbar">
                        <div class="search-input">
                            <svg class="search-icon" viewBox="0 0 16 16" fill="none">
                                <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                                <path d="m11 11 3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <input type="text" placeholder="Search rules">
                        </div>
                        <div class="toolbar-right">
                            <button class="button button-primary" data-action="add-rule">
                                <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                    <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Add Rule
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-header-cell" style="flex: 1;">Rule Name</div>
                            <div class="table-header-cell" style="width: 150px;">Type</div>
                            <div class="table-header-cell" style="width: 150px;">Status</div>
                            <div class="table-header-cell" style="width: 150px;">Priority</div>
                            <div style="width: 24px;"></div>
                        </div>
                        <div class="table-body" id="rulesTableBody">
                            <!-- Rules will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
                <!-- Code Review Analytics Section -->
                <div id="analytics-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- Stats Cards -->
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-lg);">
                            <div class="stat-card">
                                <div class="stat-label">Total Reviews</div>
                                <div class="stat-value">1,247</div>
                                <div class="stat-change positive">+12% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Average Review Time</div>
                                <div class="stat-value">2.4h</div>
                                <div class="stat-change negative">-8% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Approval Rate</div>
                                <div class="stat-value">87%</div>
                                <div class="stat-change positive">+3% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Active Reviewers</div>
                                <div class="stat-value">24</div>
                                <div class="stat-change positive">+2 this month</div>
                            </div>
                        </div>

                        <!-- Charts Row -->
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-xl);">
                            <!-- Reviews Over Time Chart -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Reviews Over Time</div>
                                    <select class="chart-period-select">
                                        <option>Last 7 days</option>
                                        <option>Last 30 days</option>
                                        <option>Last 3 months</option>
                                        <option>Last year</option>
                                    </select>
                                </div>
                                <div class="chart-body" id="reviewsChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>

                            <!-- Review Status Distribution -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Review Status</div>
                                </div>
                                <div class="chart-body" id="statusChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>
                        </div>

                        <!-- Bottom Charts Row -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl);">
                            <!-- Top Reviewers -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Top Reviewers</div>
                                </div>
                                <div class="chart-body" id="topReviewersChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>

                            <!-- Review Types -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Review Types Distribution</div>
                                </div>
                                <div class="chart-body" id="reviewTypesChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Chat Analytics Section -->
                <div id="chat-analytics-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- Stats Cards -->
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-lg);">
                            <div class="stat-card">
                                <div class="stat-label">Total Messages</div>
                                <div class="stat-value">8,432</div>
                                <div class="stat-change positive">+18% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Active Chats</div>
                                <div class="stat-value">156</div>
                                <div class="stat-change positive">+12% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Avg Response Time</div>
                                <div class="stat-value">2.3m</div>
                                <div class="stat-change negative">-15% from last month</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-label">Satisfaction Rate</div>
                                <div class="stat-value">94%</div>
                                <div class="stat-change positive">+2% from last month</div>
                            </div>
                        </div>

                        <!-- Charts Row -->
                        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-xl);">
                            <!-- Messages Over Time Chart -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Messages Over Time</div>
                                    <select class="chart-period-select" id="chatPeriodSelect">
                                        <option>Last 7 days</option>
                                        <option>Last 30 days</option>
                                        <option>Last 3 months</option>
                                        <option>Last year</option>
                                    </select>
                                </div>
                                <div class="chart-body" id="messagesChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>

                            <!-- Message Types Distribution -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Message Types</div>
                                </div>
                                <div class="chart-body" id="messageTypesChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>
                        </div>

                        <!-- Bottom Charts Row -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl);">
                            <!-- Top Users -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Most Active Users</div>
                                </div>
                                <div class="chart-body" id="topUsersChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>

                            <!-- Response Time Distribution -->
                            <div class="chart-container">
                                <div class="chart-header">
                                    <div class="chart-title">Response Time Distribution</div>
                                </div>
                                <div class="chart-body" id="responseTimeChart">
                                    <!-- Chart will be rendered here -->
                                </div>
                            </div>
                        </div>

                        <!-- Recent Chats Table -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Recent Chats</div>
                                <button class="button" data-action="view-all-chats">
                                    View All
                                </button>
                            </div>
                            <div class="table-container" style="border: none; background: transparent;">
                                <div class="table-body" id="recentChatsTable">
                                    <!-- Recent chats will be rendered here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Git Integration Section -->
                <div id="git-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- Connection Status -->
                        <div class="config-banner" style="margin-bottom: 0;">
                            <div style="display: flex; align-items: center; gap: var(--spacing-md); flex: 1;">
                                <div style="width: 12px; height: 12px; border-radius: 50%; background: var(--accent-success); flex-shrink: 0;"></div>
                                <div>
                                    <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Connected to GitLab</div>
                                    <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">[GitLab organizaiton name] â€¢ Last synced: 5 minutes ago</div>
                                </div>
                            </div>
                            <div style="display: flex; gap: var(--spacing-md);">
                                <button class="button" data-action="sync-git">
                                    <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                        <path d="M1 8a7 7 0 0114 0M1 8l3-3m-3 3l3 3M15 8l-3-3m3 3l-3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                    Sync Now
                                </button>
                                <button class="button" data-action="disconnect-git">
                                    <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                        <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    Disconnect
                                </button>
                            </div>
                        </div>

                        <!-- Git Configuration -->
                        <div class="table-container">
                            <div class="table-header" style="background: var(--bg-4);">
                                <div class="table-header-cell" style="flex: 1;">Configuration</div>
                                <div class="table-header-cell" style="width: 200px;">Value</div>
                                <div class="table-header-cell" style="width: 150px;">Status</div>
                                <div style="width: 24px;"></div>
                            </div>
                            <div class="table-body" id="gitConfigTable">
                                <!-- Git config rows will be generated by JavaScript -->
                            </div>
                        </div>

                        <!-- Repository Access -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Repository Access</div>
                                <button class="button button-primary" data-action="manage-repo-access">
                                    <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                        <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    Manage Access
                                </button>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Full Access</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Access to all repositories in the organization</div>
                                        </div>
                                        <div class="toggle-switch active" data-git-access="full">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Selected Repositories</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Access only to selected repositories</div>
                                        </div>
                                        <div class="toggle-switch" data-git-access="selected">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Webhook Configuration -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Webhook Configuration</div>
                                <button class="button button-primary" data-action="add-webhook">
                                    <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                        <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    Add Webhook
                                </button>
                            </div>
                            <div class="table-container" style="border: none; background: transparent;">
                                <div class="table-header" style="background: transparent; border-bottom: 1px solid var(--border-primary);">
                                    <div class="table-header-cell" style="flex: 1;">Webhook URL</div>
                                    <div class="table-header-cell" style="width: 150px;">Events</div>
                                    <div class="table-header-cell" style="width: 120px;">Status</div>
                                    <div class="table-header-cell" style="width: 150px;">Last Triggered</div>
                                    <div style="width: 24px;"></div>
                                </div>
                                <div class="table-body" id="webhooksTable">
                                    <!-- Webhooks will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Manage Subscription Section -->
                <div id="subscription-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- Current Plan -->
                        <div class="config-banner" style="background: linear-gradient(135deg, rgba(47, 120, 246, 0.1), rgba(142, 84, 233, 0.1)); border: 1px solid rgba(47, 120, 246, 0.3);">
                            <div style="display: flex; align-items: center; justify-content: space-between; flex: 1;">
                                <div>
                                    <div style="font-size: 18px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">10X DEVELOPER Plan</div>
                                    <div style="font-size: 14px; color: var(--text-muted);">Active until December 31, 2024</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 32px; font-weight: 600; color: var(--text-primary);">$299</div>
                                    <div style="font-size: 12px; color: var(--text-muted);">per month</div>
                                </div>
                            </div>
                        </div>

                        <!-- Plan Features -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Plan Features</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: var(--spacing-lg);">
                                    <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">Unlimited repositories</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">Advanced code review AI</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">Priority support</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">Custom review rules</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">Analytics dashboard</span>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                                                <circle cx="10" cy="10" r="8" stroke="var(--accent-success)" stroke-width="2"/>
                                                <path d="M6 10l3 3 5-6" stroke="var(--accent-success)" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                            <span style="font-size: 14px; color: var(--text-primary);">API access</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Billing Information -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Billing Information</div>
                                <button class="button" data-action="update-billing">
                                    <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                        <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Update Payment Method
                                </button>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Payment Method</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 4242</div>
                                        </div>
                                        <div style="display: flex; align-items: center; gap: var(--spacing-xs);">
                                            <svg width="24" height="16" viewBox="0 0 24 16" fill="none">
                                                <rect width="24" height="16" rx="2" fill="#1A1F71"/>
                                                <rect x="2" y="4" width="20" height="8" rx="1" fill="#EB001B"/>
                                            </svg>
                                            <span style="font-size: 12px; color: var(--text-muted);">Visa</span>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Billing Address</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">123 Main St, City, State 12345</div>
                                        </div>
                                        <button class="button" data-action="edit-address" style="height: 28px;">
                                            Edit
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Next Billing Date</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">December 31, 2024</div>
                                        </div>
                                        <div style="font-size: 14px; font-weight: 600; color: var(--text-primary);">$299.00</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Billing History -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Billing History</div>
                            </div>
                            <div class="table-container" style="border: none; background: transparent;">
                                <div class="table-header" style="background: transparent; border-bottom: 1px solid var(--border-primary);">
                                    <div class="table-header-cell" style="flex: 1;">Date</div>
                                    <div class="table-header-cell" style="width: 150px;">Amount</div>
                                    <div class="table-header-cell" style="width: 150px;">Status</div>
                                    <div class="table-header-cell" style="width: 120px;">Invoice</div>
                                    <div style="width: 24px;"></div>
                                </div>
                                <div class="table-body" id="billingHistoryTable">
                                    <!-- Billing history will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Change Plan -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Change Plan</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-lg);">
                                    <div class="plan-card" data-plan="basic">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Basic</div>
                                        <div style="font-size: 24px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">$99<span style="font-size: 14px; color: var(--text-muted);">/mo</span></div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">For small teams</div>
                                        <button class="button" style="width: 100%;" data-action="select-plan" data-plan-type="basic">Select Plan</button>
                                    </div>
                                    <div class="plan-card active" data-plan="developer">
                                        <div style="display: flex; align-items: center; gap: var(--spacing-xs); margin-bottom: var(--spacing-xs);">
                                            <div style="font-size: 16px; font-weight: 600; color: var(--text-primary);">10X DEVELOPER</div>
                                            <span style="padding: 2px 6px; background: var(--accent-primary); border-radius: 4px; font-size: 10px; color: var(--text-primary);">Current</span>
                                        </div>
                                        <div style="font-size: 24px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">$299<span style="font-size: 14px; color: var(--text-muted);">/mo</span></div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">For growing teams</div>
                                        <button class="button button-primary" style="width: 100%;" disabled>Current Plan</button>
                                    </div>
                                    <div class="plan-card" data-plan="enterprise">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Enterprise</div>
                                        <div style="font-size: 24px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Custom</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">For large organizations</div>
                                        <button class="button" style="width: 100%;" data-action="select-plan" data-plan-type="enterprise">Contact Sales</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Cancel Subscription -->
                        <div style="display: flex; justify-content: flex-end;">
                            <button class="button" data-action="cancel-subscription" style="background: rgba(255, 77, 77, 0.1); border-color: #ff4d4d; color: #ff4d4d;">
                                Cancel Subscription
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Help Section -->
                <div id="help-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- Search Help -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Search Help</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div class="search-input" style="max-width: 600px;">
                                    <svg class="search-icon" viewBox="0 0 16 16" fill="none">
                                        <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                                        <path d="M12 12l-3-3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                    </svg>
                                    <input type="text" id="helpSearchInput" placeholder="Search for help articles..." style="flex: 1; background: transparent; border: none; outline: none; color: var(--text-primary); font-size: 14px;">
                                </div>
                            </div>
                        </div>

                        <!-- Quick Links -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Quick Links</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: var(--spacing-lg);">
                                    <div class="help-card" data-help-topic="getting-started">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Getting Started</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">Learn the basics of using the platform</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="getting-started">View Guide</button>
                                    </div>
                                    <div class="help-card" data-help-topic="code-review">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Code Review</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">How to set up and use code review</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="code-review">View Guide</button>
                                    </div>
                                    <div class="help-card" data-help-topic="integrations">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Integrations</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">Connect with Git, CI/CD, and more</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="integrations">View Guide</button>
                                    </div>
                                    <div class="help-card" data-help-topic="analytics">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Analytics</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">Understanding your analytics dashboard</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="analytics">View Guide</button>
                                    </div>
                                    <div class="help-card" data-help-topic="troubleshooting">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">Troubleshooting</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">Common issues and solutions</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="troubleshooting">View Guide</button>
                                    </div>
                                    <div class="help-card" data-help-topic="api">
                                        <div style="font-size: 16px; font-weight: 600; color: var(--text-primary); margin-bottom: var(--spacing-xs);">API Documentation</div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-md);">Complete API reference guide</div>
                                        <button class="button" style="width: 100%;" data-action="view-article" data-article="api">View Guide</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- FAQ -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Frequently Asked Questions</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-md);" id="faqList">
                                    <!-- FAQ items will be generated by JavaScript -->
                                </div>
                            </div>
                        </div>

                        <!-- Contact Support -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Contact Support</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Email Support</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">support@company.com</div>
                                        </div>
                                        <button class="button" data-action="contact-email">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M2 4l6 4 6-4M2 4h12v8H2V4z" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Send Email
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Live Chat</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Available 24/7 for priority support</div>
                                        </div>
                                        <button class="button button-primary" data-action="start-chat">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M3 8l3 3 7-7M2 8a6 6 0 1112 0A6 6 0 012 8z" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Start Chat
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Settings Section -->
                <div id="settings-section" class="content-section" style="display: none;">
                    <div style="display: flex; flex-direction: column; gap: var(--spacing-xl);">
                        <!-- General Settings -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">General Settings</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Language</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Select your preferred language</div>
                                        </div>
                                        <select class="button" id="languageSelect" style="width: 200px; height: 32px; cursor: pointer;">
                                            <option>English</option>
                                            <option>Spanish</option>
                                            <option>French</option>
                                            <option>German</option>
                                            <option>Russian</option>
                                        </select>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Theme</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Choose your preferred theme</div>
                                        </div>
                                        <select class="button" id="themeSelect" style="width: 200px; height: 32px; cursor: pointer;">
                                            <option>Dark</option>
                                            <option>Light</option>
                                            <option>Auto</option>
                                        </select>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Timezone</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Set your timezone</div>
                                        </div>
                                        <select class="button" id="timezoneSelect" style="width: 200px; height: 32px; cursor: pointer;">
                                            <option>UTC</option>
                                            <option>America/New_York</option>
                                            <option>America/Los_Angeles</option>
                                            <option>Europe/London</option>
                                            <option>Europe/Berlin</option>
                                            <option>Asia/Tokyo</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Notification Settings -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Notification Settings</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Email Notifications</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Receive notifications via email</div>
                                        </div>
                                        <div class="toggle-switch active" data-setting="email-notifications">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Push Notifications</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Receive browser push notifications</div>
                                        </div>
                                        <div class="toggle-switch active" data-setting="push-notifications">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Code Review Alerts</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Get notified about new code reviews</div>
                                        </div>
                                        <div class="toggle-switch active" data-setting="review-alerts">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm);">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Weekly Reports</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Receive weekly analytics reports</div>
                                        </div>
                                        <div class="toggle-switch" data-setting="weekly-reports">
                                            <div class="toggle-knob"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Security Settings -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Security Settings</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Two-Factor Authentication</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Add an extra layer of security</div>
                                        </div>
                                        <button class="button" data-action="setup-2fa">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Setup 2FA
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Change Password</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Update your account password</div>
                                        </div>
                                        <button class="button" data-action="change-password">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Change Password
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Active Sessions</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Manage your active sessions</div>
                                        </div>
                                        <button class="button" data-action="view-sessions">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            View Sessions
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Account Settings -->
                        <div class="chart-container">
                            <div class="chart-header">
                                <div class="chart-title">Account Settings</div>
                            </div>
                            <div style="padding: var(--spacing-lg);">
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-lg);">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Profile Information</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Update your name, email, and avatar</div>
                                        </div>
                                        <button class="button" data-action="edit-profile">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Edit Profile
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Export Data</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Download all your account data</div>
                                        </div>
                                        <button class="button" data-action="export-data">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M8 2v6m0 0l2-2m-2 2l-2-2M2 12h12" stroke="currentColor" stroke-width="1.5"/>
                                            </svg>
                                            Export Data
                                        </button>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">Delete Account</div>
                                            <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">Permanently delete your account</div>
                                        </div>
                                        <button class="button" data-action="delete-account" style="background: rgba(255, 77, 77, 0.1); border-color: #ff4d4d; color: #ff4d4d;">
                                            <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                                <path d="M4 4l8 8M12 4l-8 8" stroke="currentColor" stroke-width="2"/>
                                            </svg>
                                            Delete Account
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Save Settings -->
                        <div style="display: flex; justify-content: flex-end;">
                            <button class="button button-primary" data-action="save-settings">
                                <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                    <path d="M3 8l3 3 7-7M2 8a6 6 0 1112 0A6 6 0 012 8z" stroke="currentColor" stroke-width="1.5"/>
                                </svg>
                                Save Settings
                            </button>
                        </div>
                    </div>
                </div>
                <!-- Manage Users Section -->
                <div id="users-section" class="content-section" style="display: none;">
                    <div class="config-toolbar">
                        <div class="search-input">
                            <svg class="search-icon" viewBox="0 0 16 16" fill="none">
                                <circle cx="7" cy="7" r="5" stroke="currentColor" stroke-width="1.5"/>
                                <path d="m11 11 3 3" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                            <input type="text" placeholder="Search users">
                        </div>
                        <div class="toolbar-right">
                            <button class="button button-primary" data-action="add-user">
                                <svg class="button-icon" viewBox="0 0 16 16" fill="none">
                                    <path d="M8 3v10M3 8h10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                                Add User
                            </button>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-header-cell" style="flex: 1;">User</div>
                            <div class="table-header-cell" style="width: 200px;">Email</div>
                            <div class="table-header-cell" style="width: 150px;">Role</div>
                            <div class="table-header-cell" style="width: 150px;">Status</div>
                            <div class="table-header-cell" style="width: 150px;">Last Active</div>
                            <div style="width: 24px;"></div>
                        </div>
                        <div class="table-body" id="usersTableBody">
                            <!-- Users will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Repository data
        const repositories = [
            { name: 'frontend-framework', lastReviewed: 'Never', lastCommit: '1 day ago', status: false },
            { name: 'automation-scripts', lastReviewed: 'Never', lastCommit: '5 days ago', status: false },
            { name: 'data-pipeline', lastReviewed: 'Never', lastCommit: '10 days ago', status: false },
            { name: 'devops-tools', lastReviewed: 'Never', lastCommit: '2 weeks ago', status: false },
            { name: 'security-scanner', lastReviewed: 'Never', lastCommit: '1 month ago', status: false },
            { name: 'backend-services', lastReviewed: 'Never', lastCommit: '2 months ago', status: false },
            { name: 'api-gateway', lastReviewed: 'Never', lastCommit: '6 months ago', status: false },
            { name: 'user-authentication', lastReviewed: 'Never', lastCommit: '1 year ago', status: false },
            { name: 'logging-infrastructure', lastReviewed: 'Never', lastCommit: '2 years ago', status: false },
            { name: 'partner-integrations', lastReviewed: 'Never', lastCommit: '3 years ago', status: false }
        ];

        // Review Rules data
        const reviewRules = [
            { name: 'Code Quality Standards', type: 'Quality', status: true, priority: 'High' },
            { name: 'Security Best Practices', type: 'Security', status: true, priority: 'Critical' },
            { name: 'Performance Guidelines', type: 'Performance', status: true, priority: 'Medium' },
            { name: 'Documentation Requirements', type: 'Documentation', status: false, priority: 'Low' },
            { name: 'Testing Coverage Rules', type: 'Testing', status: true, priority: 'High' },
            { name: 'Code Style Enforcement', type: 'Style', status: true, priority: 'Medium' }
        ];

        // Users data
        const users = [
            { name: 'John Doe', email: 'john.doe@company.com', role: 'Admin', status: 'Active', lastActive: '2 hours ago', avatar: 'JD' },
            { name: 'Jane Smith', email: 'jane.smith@company.com', role: 'Developer', status: 'Active', lastActive: '5 hours ago', avatar: 'JS' },
            { name: 'Bob Johnson', email: 'bob.johnson@company.com', role: 'Reviewer', status: 'Active', lastActive: '1 day ago', avatar: 'BJ' },
            { name: 'Alice Williams', email: 'alice.williams@company.com', role: 'Developer', status: 'Inactive', lastActive: '3 days ago', avatar: 'AW' },
            { name: 'Charlie Brown', email: 'charlie.brown@company.com', role: 'Admin', status: 'Active', lastActive: '30 minutes ago', avatar: 'CB' },
            { name: 'Diana Prince', email: 'diana.prince@company.com', role: 'Reviewer', status: 'Active', lastActive: '4 hours ago', avatar: 'DP' }
        ];

        // Generate table rows
        function renderTable() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = repositories.map((repo, index) => `
                <div class="table-row" data-index="${index}">
                    <div class="table-cell">
                        <div class="checkbox" data-checkbox="${index}"></div>
                        ${repo.name}
                    </div>
                    <div class="table-cell">${repo.lastReviewed}</div>
                    <div class="table-cell">${repo.lastCommit}</div>
                    <div class="table-cell" style="display: flex; align-items: center; gap: 8px;">
                        <div class="toggle-switch ${repo.status ? 'active' : ''}" data-toggle="${index}">
                            <div class="toggle-knob"></div>
                        </div>
                        <span>${repo.status ? 'Enabled' : 'Disabled'}</span>
                    </div>
                    <div class="settings-button" data-settings="${index}" title="Settings">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                </div>
            `).join('');
            updateRepositoriesCount();
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            renderTable();

            // Menu items - section switching
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function() {
                    const menuType = this.dataset.menu;
                    if (menuType) {
                        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active'));
                        this.classList.add('active');
                        switchSection(menuType);
                    }
                });
            });

            // Checkboxes
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-checkbox]')) {
                    const checkbox = e.target.closest('[data-checkbox]');
                    checkbox.classList.toggle('checked');
                }

                if (e.target.closest('[data-select-all]')) {
                    const selectAll = e.target.closest('[data-select-all]');
                    const isChecked = selectAll.classList.toggle('checked');
                    document.querySelectorAll('[data-checkbox]').forEach(cb => {
                        if (isChecked) {
                            cb.classList.add('checked');
                        } else {
                            cb.classList.remove('checked');
                        }
                    });
                }
            });

            // Toggle switches
            document.addEventListener('click', function(e) {
                if (e.target.closest('[data-toggle]')) {
                    const toggle = e.target.closest('[data-toggle]');
                    const index = parseInt(toggle.dataset.toggle);
                    const isActive = toggle.classList.toggle('active');
                    repositories[index].status = isActive;
                    const statusText = toggle.parentElement.querySelector('span');
                    statusText.textContent = isActive ? 'Enabled' : 'Disabled';
                    updateRepositoriesCount();
                }
            });

            // Buttons
            document.querySelectorAll('[data-action]').forEach(button => {
                button.addEventListener('click', function() {
                    const action = this.dataset.action;
                    
                    if (action === 'add-repos') {
                        showAddRepositoryModal();
                    } else if (action === 'refresh') {
                        refreshRepositoriesList();
                    } else if (action === 'add-agent') {
                        showToast('Add new agent functionality', 'info');
                    } else if (action === 'clone-agent') {
                        showToast('Clone agent functionality', 'info');
                    } else if (action === 'change-settings') {
                        showToast('Change agent settings functionality', 'info');
                    } else if (action === 'add-rule') {
                        showToast('Add new review rule functionality', 'info');
                    } else if (action === 'add-user') {
                        showAddUserModal();
                    } else if (action === 'view-all-chats') {
                        showToast('View all chats functionality', 'info');
                    } else if (action === 'sync-git') {
                        syncGitIntegration();
                    } else if (action === 'disconnect-git') {
                        disconnectGitIntegration();
                    } else if (action === 'manage-repo-access') {
                        showToast('Manage repository access functionality', 'info');
                    } else if (action === 'add-webhook') {
                        showAddWebhookModal();
                    } else if (action === 'update-billing') {
                        showUpdateBillingModal();
                    } else if (action === 'edit-address') {
                        showEditAddressModal();
                    } else if (action === 'select-plan') {
                        const planType = this.dataset.planType;
                        showChangePlanModal(planType);
                    } else if (action === 'cancel-subscription') {
                        showCancelSubscriptionModal();
                    } else if (action === 'view-article') {
                        const article = this.dataset.article;
                        showToast(`Opening article: ${article}`, 'info');
                    } else if (action === 'contact-email') {
                        window.location.href = 'mailto:support@company.com';
                    } else if (action === 'start-chat') {
                        showToast('Starting live chat...', 'info');
                    } else if (action === 'setup-2fa') {
                        showToast('Two-factor authentication setup', 'info');
                    } else if (action === 'change-password') {
                        showChangePasswordModal();
                    } else if (action === 'view-sessions') {
                        showSessionsModal();
                    } else if (action === 'edit-profile') {
                        showEditProfileModal();
                    } else if (action === 'export-data') {
                        showToast('Exporting your data...', 'info');
                        setTimeout(() => showToast('Data export started. You will receive an email when ready.', 'success'), 1000);
                    } else if (action === 'delete-account') {
                        showDeleteAccountModal();
                    } else if (action === 'save-settings') {
                        saveSettings();
                    } else if (action === 'collapse') {
                        toggleSidebar();
                    }
                });
            });

            // Settings buttons
            document.querySelectorAll('[data-settings]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = this.dataset.settings;
                    console.log('Settings for:', repositories[index].name);
                });
            });

            // Pagination
            document.querySelectorAll('[data-page]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const page = this.dataset.page;
                    if (page === 'prev' || page === 'next') {
                        console.log('Navigate:', page);
                    } else {
                        document.querySelectorAll('.pagination-number').forEach(n => n.classList.remove('active'));
                        this.classList.add('active');
                    }
                });
            });

            // Search for repositories
            const reposSearchInput = document.querySelector('#repositories-section .search-input input');
            if (reposSearchInput) {
                reposSearchInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#repositories-section .table-row');
                    rows.forEach(row => {
                        const name = row.querySelector('.table-cell').textContent.toLowerCase();
                        row.style.display = name.includes(query) ? '' : 'none';
                    });
                });
            }

            // Search for rules
            const rulesSearchInput = document.querySelector('#review-rules-section .search-input input');
            if (rulesSearchInput) {
                rulesSearchInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#review-rules-section .table-row');
                    rows.forEach(row => {
                        const name = row.querySelector('.table-cell').textContent.toLowerCase();
                        row.style.display = name.includes(query) ? '' : 'none';
                    });
                });
            }

            // Search for users
            const usersSearchInput = document.querySelector('#users-section .search-input input');
            if (usersSearchInput) {
                usersSearchInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#users-section .table-row');
                    rows.forEach(row => {
                        const name = row.querySelector('.table-cell').textContent.toLowerCase();
                        const email = row.querySelectorAll('.table-cell')[1].textContent.toLowerCase();
                        row.style.display = (name.includes(query) || email.includes(query)) ? '' : 'none';
                    });
                });
            }
        });

        // Add Repository Modal
        function showAddRepositoryModal() {
            const modal = document.getElementById('addRepoModal');
            if (!modal) {
                createAddRepositoryModal();
            }
            document.getElementById('addRepoModal').classList.add('active');
            document.getElementById('repoNameInput').focus();
        }

        function createAddRepositoryModal() {
            const modalHTML = `
                <div class="modal-overlay" id="addRepoModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Add Repository</div>
                            <div class="modal-close" onclick="closeAddRepositoryModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="repoNameInput" placeholder="Enter repository name (e.g., my-new-repo)">
                            <input type="text" class="modal-input" id="repoUrlInput" placeholder="Enter repository URL (optional)">
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeAddRepositoryModal()">Cancel</button>
                            <button class="button button-primary" onclick="addRepository()">Add Repository</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Close on overlay click
            document.getElementById('addRepoModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAddRepositoryModal();
                }
            });

            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('addRepoModal').classList.contains('active')) {
                    closeAddRepositoryModal();
                }
            });

            // Submit on Enter
            document.getElementById('repoNameInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    addRepository();
                }
            });
        }

        function closeAddRepositoryModal() {
            document.getElementById('addRepoModal').classList.remove('active');
            document.getElementById('repoNameInput').value = '';
            document.getElementById('repoUrlInput').value = '';
        }

        function addRepository() {
            const repoName = document.getElementById('repoNameInput').value.trim();
            if (!repoName) {
                showToast('Please enter a repository name', 'info');
                return;
            }

            // Check if repository already exists
            if (repositories.some(r => r.name === repoName)) {
                showToast('Repository already exists', 'info');
                return;
            }

            // Add new repository
            const newRepo = {
                name: repoName,
                lastReviewed: 'Never',
                lastCommit: 'Just now',
                status: false
            };

            repositories.unshift(newRepo);
            renderTable();
            updateRepositoriesCount();
            closeAddRepositoryModal();
            showToast(`Repository "${repoName}" added successfully`, 'success');
        }

        // Refresh Repositories List
        function refreshRepositoriesList() {
            const refreshButton = document.querySelector('[data-action="refresh"]');
            const originalContent = refreshButton.innerHTML;
            
            // Show loading state
            refreshButton.disabled = true;
            refreshButton.innerHTML = '<div class="loading"></div>';
            refreshButton.style.opacity = '0.6';
            refreshButton.style.cursor = 'not-allowed';

            // Simulate API call
            setTimeout(() => {
                // Update last commit times randomly
                repositories.forEach(repo => {
                    if (repo.lastCommit !== 'Just now') {
                        const times = ['1 hour ago', '2 hours ago', '3 hours ago', '5 hours ago', '1 day ago'];
                        repo.lastCommit = times[Math.floor(Math.random() * times.length)];
                    }
                });

                renderTable();
                updateRepositoriesCount();
                
                // Restore button
                refreshButton.innerHTML = originalContent;
                refreshButton.disabled = false;
                refreshButton.style.opacity = '1';
                refreshButton.style.cursor = 'pointer';
                
                showToast('Repository list refreshed successfully', 'success');
            }, 1500);
        }

        // Update repositories count
        function updateRepositoriesCount() {
            const enabledCount = repositories.filter(r => r.status).length;
            const totalCount = repositories.length;
            document.querySelector('.repos-count').textContent = `${enabledCount} of ${totalCount} repositories enabled`;
        }

        // Show toast notification
        function showToast(message, type = 'info') {
            let toast = document.getElementById('toast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'toast';
                toast.className = 'toast';
                document.body.appendChild(toast);
            }

            toast.className = `toast ${type} active`;
            toast.innerHTML = `<div class="toast-message">${message}</div>`;

            setTimeout(() => {
                toast.classList.remove('active');
            }, 3000);
        }

        // Toggle sidebar
        function toggleSidebar() {
            const sidebar = document.querySelector('.sidebar');
            sidebar.style.transform = sidebar.style.transform === 'translateX(-100%)' 
                ? 'translateX(0)' 
                : 'translateX(-100%)';
        }

        // Switch between sections
        function switchSection(section) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(s => {
                s.style.display = 'none';
            });

            // Show selected section
            if (section === 'repositories') {
                document.getElementById('repositories-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Code Review Agent';
            } else if (section === 'rules') {
                document.getElementById('review-rules-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Review Rules';
                renderRulesTable();
            } else if (section === 'users') {
                document.getElementById('users-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Manage Users';
                renderUsersTable();
            } else if (section === 'analytics') {
                document.getElementById('analytics-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Code Review Analytics';
                renderAnalytics();
            } else if (section === 'chat') {
                document.getElementById('chat-analytics-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Chat Analytics';
                renderChatAnalytics();
            } else if (section === 'git') {
                document.getElementById('git-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Git Integration';
                renderGitSection();
            } else if (section === 'subscription') {
                document.getElementById('subscription-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Manage Subscription';
                renderSubscriptionSection();
            } else if (section === 'help') {
                document.getElementById('help-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Help & Support';
                renderHelpSection();
            } else if (section === 'settings') {
                document.getElementById('settings-section').style.display = 'block';
                document.querySelector('.page-title').textContent = 'Settings';
                renderSettingsSection();
            }
        }

        // Render Review Rules table
        function renderRulesTable() {
            const rulesTableBody = document.getElementById('rulesTableBody');
            if (!rulesTableBody) return;

            rulesTableBody.innerHTML = reviewRules.map((rule, index) => `
                <div class="table-row" data-rule-index="${index}">
                    <div class="table-cell" style="flex: 1;">
                        ${rule.name}
                    </div>
                    <div class="table-cell" style="width: 150px;">
                        <span style="padding: 2px 8px; background: rgba(47, 120, 246, 0.2); border-radius: 4px; font-size: 12px;">
                            ${rule.type}
                        </span>
                    </div>
                    <div class="table-cell" style="width: 150px; display: flex; align-items: center; gap: 8px;">
                        <div class="toggle-switch ${rule.status ? 'active' : ''}" data-rule-toggle="${index}">
                            <div class="toggle-knob"></div>
                        </div>
                        <span>${rule.status ? 'Enabled' : 'Disabled'}</span>
                    </div>
                    <div class="table-cell" style="width: 150px;">
                        <span style="padding: 2px 8px; background: ${rule.priority === 'Critical' ? 'rgba(255, 77, 77, 0.2)' : rule.priority === 'High' ? 'rgba(255, 165, 0, 0.2)' : 'rgba(102, 198, 28, 0.2)'}; border-radius: 4px; font-size: 12px; color: ${rule.priority === 'Critical' ? '#ff4d4d' : rule.priority === 'High' ? '#ffa500' : '#66c61c'};">
                            ${rule.priority}
                        </span>
                    </div>
                    <div class="settings-button" data-rule-settings="${index}" title="Settings">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                </div>
            `).join('');

            // Add event listeners for rule toggles
            document.querySelectorAll('[data-rule-toggle]').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const index = parseInt(this.dataset.ruleToggle);
                    const isActive = this.classList.toggle('active');
                    reviewRules[index].status = isActive;
                    const statusText = this.parentElement.querySelector('span');
                    statusText.textContent = isActive ? 'Enabled' : 'Disabled';
                });
            });

            // Add event listeners for rule settings
            document.querySelectorAll('[data-rule-settings]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = this.dataset.ruleSettings;
                    showToast(`Settings for rule: ${reviewRules[index].name}`, 'info');
                });
            });

            // Add search functionality for rules
            const rulesSearchInput = document.querySelector('#review-rules-section .search-input input');
            if (rulesSearchInput) {
                // Remove old listeners and add new one
                const newInput = rulesSearchInput.cloneNode(true);
                rulesSearchInput.parentNode.replaceChild(newInput, rulesSearchInput);
                
                newInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    const rows = document.querySelectorAll('#review-rules-section .table-row');
                    rows.forEach(row => {
                        const name = row.querySelector('.table-cell').textContent.toLowerCase();
                        row.style.display = name.includes(query) ? '' : 'none';
                    });
                });
            }
        }

        // Render Users table
        function renderUsersTable() {
            const usersTableBody = document.getElementById('usersTableBody');
            if (!usersTableBody) return;

            usersTableBody.innerHTML = users.map((user, index) => `
                <div class="table-row" data-user-index="${index}">
                    <div class="table-cell" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                        <div class="user-avatar" style="width: 32px; height: 32px; font-size: 12px;">
                            ${user.avatar}
                        </div>
                        <span>${user.name}</span>
                    </div>
                    <div class="table-cell" style="width: 200px; color: var(--text-muted);">
                        ${user.email}
                    </div>
                    <div class="table-cell" style="width: 150px;">
                        <span style="padding: 2px 8px; background: ${user.role === 'Admin' ? 'rgba(255, 77, 77, 0.2)' : 'rgba(47, 120, 246, 0.2)'}; border-radius: 4px; font-size: 12px; color: ${user.role === 'Admin' ? '#ff4d4d' : '#2f78f6'};">
                            ${user.role}
                        </span>
                    </div>
                    <div class="table-cell" style="width: 150px; display: flex; align-items: center; gap: 8px;">
                        <div style="width: 8px; height: 8px; border-radius: 50%; background: ${user.status === 'Active' ? 'var(--accent-success)' : 'var(--text-muted)'};"></div>
                        <span>${user.status}</span>
                    </div>
                    <div class="table-cell" style="width: 150px; color: var(--text-muted);">
                        ${user.lastActive}
                    </div>
                    <div class="settings-button" data-user-settings="${index}" title="Settings">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                </div>
            `).join('');

            // Add event listeners for user settings
            document.querySelectorAll('[data-user-settings]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = this.dataset.userSettings;
                    showUserSettingsModal(index);
                });
            });
        }

        // Show Add User Modal
        function showAddUserModal() {
            const modal = document.getElementById('addUserModal');
            if (!modal) {
                createAddUserModal();
            }
            document.getElementById('addUserModal').classList.add('active');
            document.getElementById('userNameInput').focus();
        }

        function createAddUserModal() {
            const modalHTML = `
                <div class="modal-overlay" id="addUserModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Add User</div>
                            <div class="modal-close" onclick="closeAddUserModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="userNameInput" placeholder="Full Name">
                            <input type="email" class="modal-input" id="userEmailInput" placeholder="Email address">
                            <select class="modal-input" id="userRoleInput" style="height: 32px; cursor: pointer;">
                                <option value="Developer">Developer</option>
                                <option value="Reviewer">Reviewer</option>
                                <option value="Admin">Admin</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeAddUserModal()">Cancel</button>
                            <button class="button button-primary" onclick="addUser()">Add User</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Close on overlay click
            document.getElementById('addUserModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAddUserModal();
                }
            });

            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('addUserModal').classList.contains('active')) {
                    closeAddUserModal();
                }
            });

            // Submit on Enter
            document.getElementById('userNameInput').addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    addUser();
                }
            });
        }

        function closeAddUserModal() {
            const modal = document.getElementById('addUserModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('userNameInput').value = '';
                document.getElementById('userEmailInput').value = '';
                document.getElementById('userRoleInput').value = 'Developer';
            }
        }

        function addUser() {
            const userName = document.getElementById('userNameInput').value.trim();
            const userEmail = document.getElementById('userEmailInput').value.trim();
            const userRole = document.getElementById('userRoleInput').value;

            if (!userName || !userEmail) {
                showToast('Please fill in all required fields', 'info');
                return;
            }

            // Check if user already exists
            if (users.some(u => u.email === userEmail)) {
                showToast('User with this email already exists', 'info');
                return;
            }

            // Generate avatar initials
            const initials = userName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);

            // Add new user
            const newUser = {
                name: userName,
                email: userEmail,
                role: userRole,
                status: 'Active',
                lastActive: 'Just now',
                avatar: initials
            };

            users.push(newUser);
            renderUsersTable();
            closeAddUserModal();
            showToast(`User "${userName}" added successfully`, 'success');
        }

        // Show User Settings Modal
        function showUserSettingsModal(index) {
            const user = users[index];
            const modal = document.getElementById('userSettingsModal');
            if (!modal) {
                createUserSettingsModal();
            }
            
            document.getElementById('editUserNameInput').value = user.name;
            document.getElementById('editUserEmailInput').value = user.email;
            document.getElementById('editUserRoleInput').value = user.role;
            document.getElementById('editUserStatusInput').value = user.status;
            document.getElementById('userSettingsModal').dataset.userIndex = index;
            document.getElementById('userSettingsModal').classList.add('active');
        }

        function createUserSettingsModal() {
            const modalHTML = `
                <div class="modal-overlay" id="userSettingsModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Edit User</div>
                            <div class="modal-close" onclick="closeUserSettingsModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="editUserNameInput" placeholder="Full Name">
                            <input type="email" class="modal-input" id="editUserEmailInput" placeholder="Email address">
                            <select class="modal-input" id="editUserRoleInput" style="height: 32px; cursor: pointer;">
                                <option value="Developer">Developer</option>
                                <option value="Reviewer">Reviewer</option>
                                <option value="Admin">Admin</option>
                            </select>
                            <select class="modal-input" id="editUserStatusInput" style="height: 32px; cursor: pointer;">
                                <option value="Active">Active</option>
                                <option value="Inactive">Inactive</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="deleteUser()" style="background: rgba(255, 77, 77, 0.2); border-color: #ff4d4d; color: #ff4d4d; margin-right: auto;">
                                Delete User
                            </button>
                            <button class="button" onclick="closeUserSettingsModal()">Cancel</button>
                            <button class="button button-primary" onclick="saveUserChanges()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // Close on overlay click
            document.getElementById('userSettingsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeUserSettingsModal();
                }
            });

            // Close on Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('userSettingsModal').classList.contains('active')) {
                    closeUserSettingsModal();
                }
            });
        }

        function closeUserSettingsModal() {
            const modal = document.getElementById('userSettingsModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function saveUserChanges() {
            const modal = document.getElementById('userSettingsModal');
            const index = parseInt(modal.dataset.userIndex);
            const user = users[index];

            const userName = document.getElementById('editUserNameInput').value.trim();
            const userEmail = document.getElementById('editUserEmailInput').value.trim();
            const userRole = document.getElementById('editUserRoleInput').value;
            const userStatus = document.getElementById('editUserStatusInput').value;

            if (!userName || !userEmail) {
                showToast('Please fill in all required fields', 'info');
                return;
            }

            // Check if email is changed and already exists
            if (userEmail !== user.email && users.some(u => u.email === userEmail && users.indexOf(u) !== index)) {
                showToast('User with this email already exists', 'info');
                return;
            }

            // Update user
            const initials = userName.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2);
            users[index] = {
                ...users[index],
                name: userName,
                email: userEmail,
                role: userRole,
                status: userStatus,
                avatar: initials
            };

            renderUsersTable();
            closeUserSettingsModal();
            showToast('User updated successfully', 'success');
        }

        function deleteUser() {
            const modal = document.getElementById('userSettingsModal');
            const index = parseInt(modal.dataset.userIndex);
            const userName = users[index].name;

            if (confirm(`Are you sure you want to delete user "${userName}"?`)) {
                users.splice(index, 1);
                renderUsersTable();
                closeUserSettingsModal();
                showToast(`User "${userName}" deleted successfully`, 'success');
            }
        }

        // Analytics data
        const analyticsData = {
            reviewsOverTime: {
                'Last 7 days': [
                    { day: 'Mon', count: 45 },
                    { day: 'Tue', count: 52 },
                    { day: 'Wed', count: 38 },
                    { day: 'Thu', count: 61 },
                    { day: 'Fri', count: 48 },
                    { day: 'Sat', count: 22 },
                    { day: 'Sun', count: 15 }
                ],
                'Last 30 days': [
                    { day: 'Week 1', count: 312 },
                    { day: 'Week 2', count: 287 },
                    { day: 'Week 3', count: 298 },
                    { day: 'Week 4', count: 305 }
                ],
                'Last 3 months': [
                    { day: 'Jan', count: 1247 },
                    { day: 'Feb', count: 1389 },
                    { day: 'Mar', count: 1456 }
                ],
                'Last year': [
                    { day: 'Q1', count: 3892 },
                    { day: 'Q2', count: 4123 },
                    { day: 'Q3', count: 3987 },
                    { day: 'Q4', count: 4256 }
                ]
            },
            reviewStatus: [
                { status: 'Approved', count: 245, color: '#66c61c' },
                { status: 'Pending', count: 89, color: '#ffa500' },
                { status: 'Rejected', count: 34, color: '#ff4d4d' },
                { status: 'Draft', count: 12, color: '#a3a3a3' }
            ],
            topReviewers: [
                { name: 'John Doe', email: 'john.doe@company.com', count: 127, avatar: 'JD' },
                { name: 'Jane Smith', email: 'jane.smith@company.com', count: 98, avatar: 'JS' },
                { name: 'Bob Johnson', email: 'bob.johnson@company.com', count: 76, avatar: 'BJ' },
                { name: 'Alice Williams', email: 'alice.williams@company.com', count: 65, avatar: 'AW' },
                { name: 'Charlie Brown', email: 'charlie.brown@company.com', count: 54, avatar: 'CB' }
            ],
            reviewTypes: [
                { type: 'Code Quality', count: 142, color: '#2f78f6' },
                { type: 'Security', count: 89, color: '#ff4d4d' },
                { type: 'Performance', count: 67, color: '#ffa500' },
                { type: 'Documentation', count: 45, color: '#66c61c' },
                { type: 'Testing', count: 38, color: '#8e54e9' }
            ]
        };

        // Chat Analytics data
        const chatAnalyticsData = {
            messagesOverTime: {
                'Last 7 days': [
                    { day: 'Mon', count: 1245 },
                    { day: 'Tue', count: 1389 },
                    { day: 'Wed', count: 1156 },
                    { day: 'Thu', count: 1423 },
                    { day: 'Fri', count: 1298 },
                    { day: 'Sat', count: 856 },
                    { day: 'Sun', count: 623 }
                ],
                'Last 30 days': [
                    { day: 'Week 1', count: 8234 },
                    { day: 'Week 2', count: 9123 },
                    { day: 'Week 3', count: 8756 },
                    { day: 'Week 4', count: 9456 }
                ],
                'Last 3 months': [
                    { day: 'Jan', count: 32145 },
                    { day: 'Feb', count: 34567 },
                    { day: 'Mar', count: 35678 }
                ],
                'Last year': [
                    { day: 'Q1', count: 102390 },
                    { day: 'Q2', count: 112456 },
                    { day: 'Q3', count: 108923 },
                    { day: 'Q4', count: 115678 }
                ]
            },
            messageTypes: [
                { type: 'Questions', count: 3421, color: '#2f78f6' },
                { type: 'Code Reviews', count: 2156, color: '#66c61c' },
                { type: 'Bug Reports', count: 1234, color: '#ff4d4d' },
                { type: 'Feature Requests', count: 987, color: '#ffa500' },
                { type: 'Other', count: 634, color: '#8e54e9' }
            ],
            topUsers: [
                { name: 'John Doe', email: 'john.doe@company.com', messages: 342, avatar: 'JD' },
                { name: 'Jane Smith', email: 'jane.smith@company.com', messages: 298, avatar: 'JS' },
                { name: 'Bob Johnson', email: 'bob.johnson@company.com', messages: 267, avatar: 'BJ' },
                { name: 'Alice Williams', email: 'alice.williams@company.com', messages: 234, avatar: 'AW' },
                { name: 'Charlie Brown', email: 'charlie.brown@company.com', messages: 198, avatar: 'CB' }
            ],
            responseTime: [
                { range: '< 1 min', count: 3421, color: '#66c61c' },
                { range: '1-5 min', count: 2156, color: '#2f78f6' },
                { range: '5-15 min', count: 1234, color: '#ffa500' },
                { range: '> 15 min', count: 621, color: '#ff4d4d' }
            ],
            recentChats: [
                { user: 'John Doe', topic: 'Code review question', time: '2 min ago', status: 'active' },
                { user: 'Jane Smith', topic: 'Bug in authentication', time: '15 min ago', status: 'resolved' },
                { user: 'Bob Johnson', topic: 'Feature implementation', time: '1 hour ago', status: 'active' },
                { user: 'Alice Williams', topic: 'Performance issue', time: '2 hours ago', status: 'pending' },
                { user: 'Charlie Brown', topic: 'Documentation update', time: '3 hours ago', status: 'resolved' }
            ]
        };

        // Render Analytics
        function renderAnalytics() {
            renderReviewsChart('Last 7 days');
            renderStatusChart();
            renderTopReviewers();
            renderReviewTypes();
            
            // Initialize period selector after a short delay to ensure DOM is ready
            setTimeout(() => {
                initPeriodSelector();
            }, 100);
        }

        // Render Reviews Over Time Chart
        function renderReviewsChart(period = 'Last 7 days') {
            const chartBody = document.getElementById('reviewsChart');
            if (!chartBody) return;

            const data = analyticsData.reviewsOverTime[period] || analyticsData.reviewsOverTime['Last 7 days'];
            const maxCount = Math.max(...data.map(d => d.count));
            
            // Add fade animation
            chartBody.style.opacity = '0';
            chartBody.style.transition = 'opacity 0.3s ease';
            
            setTimeout(() => {
                chartBody.innerHTML = `
                    <div class="bar-chart">
                        ${data.map((item, index) => {
                            const height = (item.count / maxCount) * 100;
                            return `
                                <div class="bar" style="height: ${height}%; animation: barGrow 0.5s ease-out ${index * 0.05}s both;" title="${item.day}: ${item.count} reviews">
                                    <div class="bar-value">${item.count}</div>
                                    <div class="bar-label">${item.day}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                chartBody.style.opacity = '1';
            }, 50);
        }

        // Initialize period selector
        function initPeriodSelector() {
            const periodSelect = document.querySelector('.chart-period-select');
            if (periodSelect) {
                periodSelect.addEventListener('change', function() {
                    const selectedPeriod = this.value;
                    renderReviewsChart(selectedPeriod);
                });
            }
        }

        // Render Status Distribution Chart
        function renderStatusChart() {
            const chartBody = document.getElementById('statusChart');
            if (!chartBody) return;

            const total = analyticsData.reviewStatus.reduce((sum, item) => sum + item.count, 0);
            const radius = 80;
            const centerX = 90;
            const centerY = 90;
            let currentAngle = 0;

            // Calculate angles for each segment
            const segments = analyticsData.reviewStatus.map(item => {
                const percentage = (item.count / total) * 100;
                const angle = (percentage / 100) * 360;
                const startAngle = currentAngle;
                const endAngle = currentAngle + angle;
                currentAngle = endAngle;

                // Calculate path for arc
                const startAngleRad = (startAngle - 90) * Math.PI / 180;
                const endAngleRad = (endAngle - 90) * Math.PI / 180;
                
                const x1 = centerX + radius * Math.cos(startAngleRad);
                const y1 = centerY + radius * Math.sin(startAngleRad);
                const x2 = centerX + radius * Math.cos(endAngleRad);
                const y2 = centerY + radius * Math.sin(endAngleRad);
                
                const largeArc = angle > 180 ? 1 : 0;

                return {
                    ...item,
                    percentage: percentage.toFixed(1),
                    path: `M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2} Z`,
                    startAngle,
                    endAngle
                };
            });

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-lg);">
                    <div class="pie-chart">
                        <svg class="pie-chart-svg" viewBox="0 0 180 180">
                            ${segments.map(segment => `
                                <path 
                                    class="pie-segment"
                                    d="${segment.path}" 
                                    fill="${segment.color}" 
                                    stroke="var(--bg-2)"
                                    stroke-width="2"
                                    data-status="${segment.status}"
                                    data-count="${segment.count}"
                                />
                            `).join('')}
                        </svg>
                    </div>
                    <div class="pie-legend" style="width: 100%;">
                        ${segments.map(item => `
                            <div class="pie-legend-item" style="padding: var(--spacing-xs) 0;">
                                <div class="pie-legend-color" style="background: ${item.color}; width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0;"></div>
                                <div style="flex: 1; min-width: 0;">
                                    <div style="font-weight: 500; color: var(--text-primary); font-size: 13px; line-height: 1.4;">${item.status}</div>
                                    <div style="font-size: 11px; color: var(--text-muted); line-height: 1.2;">${item.count} reviews (${item.percentage}%)</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            // Add hover effects
            const pieSegments = chartBody.querySelectorAll('.pie-segment');
            pieSegments.forEach(segment => {
                segment.addEventListener('mouseenter', function() {
                    this.style.opacity = '1';
                    this.style.strokeWidth = '3';
                });
                segment.addEventListener('mouseleave', function() {
                    this.style.opacity = '0.85';
                    this.style.strokeWidth = '2';
                });
            });
        }

        // Render Top Reviewers
        function renderTopReviewers() {
            const chartBody = document.getElementById('topReviewersChart');
            if (!chartBody) return;

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column;">
                    ${analyticsData.topReviewers.map(reviewer => `
                        <div class="reviewer-item">
                            <div class="reviewer-info">
                                <div class="reviewer-avatar">${reviewer.avatar}</div>
                                <div class="reviewer-details">
                                    <div class="reviewer-name">${reviewer.name}</div>
                                    <div class="reviewer-email">${reviewer.email}</div>
                                </div>
                            </div>
                            <div class="reviewer-stats">
                                <div class="reviewer-count">${reviewer.count}</div>
                                <div class="reviewer-label">reviews</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Render Review Types Chart
        function renderReviewTypes() {
            const chartBody = document.getElementById('reviewTypesChart');
            if (!chartBody) return;

            const maxCount = Math.max(...analyticsData.reviewTypes.map(d => d.count));

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                    ${analyticsData.reviewTypes.map(item => {
                        const percentage = (item.count / maxCount) * 100;
                        return `
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-xs);">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                        <div style="width: 12px; height: 12px; background: ${item.color}; border-radius: 2px;"></div>
                                        <span style="font-size: 13px; color: var(--text-primary);">${item.type}</span>
                                    </div>
                                    <span style="font-size: 13px; font-weight: 600; color: var(--text-primary);">${item.count}</span>
                                </div>
                                <div style="height: 8px; background: rgba(255, 255, 255, 0.04); border-radius: 4px; overflow: hidden;">
                                    <div style="height: 100%; width: ${percentage}%; background: ${item.color}; border-radius: 4px; transition: width 0.3s;"></div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        // Render Chat Analytics
        function renderChatAnalytics() {
            renderMessagesChart('Last 7 days');
            renderMessageTypesChart();
            renderTopUsers();
            renderResponseTimeChart();
            renderRecentChats();
            
            // Initialize period selector
            setTimeout(() => {
                const chatPeriodSelect = document.getElementById('chatPeriodSelect');
                if (chatPeriodSelect) {
                    chatPeriodSelect.addEventListener('change', function() {
                        const selectedPeriod = this.value;
                        renderMessagesChart(selectedPeriod);
                    });
                }
            }, 100);
        }

        // Render Messages Over Time Chart
        function renderMessagesChart(period = 'Last 7 days') {
            const chartBody = document.getElementById('messagesChart');
            if (!chartBody) return;

            const data = chatAnalyticsData.messagesOverTime[period] || chatAnalyticsData.messagesOverTime['Last 7 days'];
            const maxCount = Math.max(...data.map(d => d.count));
            
            chartBody.style.opacity = '0';
            chartBody.style.transition = 'opacity 0.3s ease';
            
            setTimeout(() => {
                chartBody.innerHTML = `
                    <div class="bar-chart">
                        ${data.map((item, index) => {
                            const height = (item.count / maxCount) * 100;
                            return `
                                <div class="bar" style="height: ${height}%; animation: barGrow 0.5s ease-out ${index * 0.05}s both;" title="${item.day}: ${item.count} messages">
                                    <div class="bar-value">${item.count}</div>
                                    <div class="bar-label">${item.day}</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                chartBody.style.opacity = '1';
            }, 50);
        }

        // Render Message Types Chart
        function renderMessageTypesChart() {
            const chartBody = document.getElementById('messageTypesChart');
            if (!chartBody) return;

            const total = chatAnalyticsData.messageTypes.reduce((sum, item) => sum + item.count, 0);
            const radius = 80;
            const centerX = 90;
            const centerY = 90;
            let currentAngle = 0;

            const segments = chatAnalyticsData.messageTypes.map(item => {
                const percentage = (item.count / total) * 100;
                const angle = (percentage / 100) * 360;
                const startAngle = currentAngle;
                const endAngle = currentAngle + angle;
                currentAngle = endAngle;

                const startAngleRad = (startAngle - 90) * Math.PI / 180;
                const endAngleRad = (endAngle - 90) * Math.PI / 180;
                
                const x1 = centerX + radius * Math.cos(startAngleRad);
                const y1 = centerY + radius * Math.sin(startAngleRad);
                const x2 = centerX + radius * Math.cos(endAngleRad);
                const y2 = centerY + radius * Math.sin(endAngleRad);
                
                const largeArc = angle > 180 ? 1 : 0;

                return {
                    ...item,
                    percentage: percentage.toFixed(1),
                    path: `M ${centerX} ${centerY} L ${x1} ${y1} A ${radius} ${radius} 0 ${largeArc} 1 ${x2} ${y2} Z`,
                    startAngle,
                    endAngle
                };
            });

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column; align-items: center; gap: var(--spacing-lg);">
                    <div class="pie-chart">
                        <svg class="pie-chart-svg" viewBox="0 0 180 180">
                            ${segments.map(segment => `
                                <path 
                                    class="pie-segment"
                                    d="${segment.path}" 
                                    fill="${segment.color}" 
                                    stroke="var(--bg-2)"
                                    stroke-width="2"
                                    data-type="${segment.type}"
                                    data-count="${segment.count}"
                                />
                            `).join('')}
                        </svg>
                    </div>
                    <div class="pie-legend" style="width: 100%;">
                        ${segments.map(item => `
                            <div class="pie-legend-item" style="padding: var(--spacing-xs) 0;">
                                <div class="pie-legend-color" style="background: ${item.color}; width: 10px; height: 10px; border-radius: 2px; flex-shrink: 0;"></div>
                                <div style="flex: 1; min-width: 0;">
                                    <div style="font-weight: 500; color: var(--text-primary); font-size: 13px; line-height: 1.4;">${item.type}</div>
                                    <div style="font-size: 11px; color: var(--text-muted); line-height: 1.2;">${item.count} messages (${item.percentage}%)</div>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            const pieSegments = chartBody.querySelectorAll('.pie-segment');
            pieSegments.forEach(segment => {
                segment.addEventListener('mouseenter', function() {
                    this.style.opacity = '1';
                    this.style.strokeWidth = '3';
                });
                segment.addEventListener('mouseleave', function() {
                    this.style.opacity = '0.85';
                    this.style.strokeWidth = '2';
                });
            });
        }

        // Render Top Users
        function renderTopUsers() {
            const chartBody = document.getElementById('topUsersChart');
            if (!chartBody) return;

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column;">
                    ${chatAnalyticsData.topUsers.map(user => `
                        <div class="reviewer-item">
                            <div class="reviewer-info">
                                <div class="reviewer-avatar">${user.avatar}</div>
                                <div class="reviewer-details">
                                    <div class="reviewer-name">${user.name}</div>
                                    <div class="reviewer-email">${user.email}</div>
                                </div>
                            </div>
                            <div class="reviewer-stats">
                                <div class="reviewer-count">${user.messages}</div>
                                <div class="reviewer-label">messages</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
        }

        // Render Response Time Chart
        function renderResponseTimeChart() {
            const chartBody = document.getElementById('responseTimeChart');
            if (!chartBody) return;

            const maxCount = Math.max(...chatAnalyticsData.responseTime.map(d => d.count));

            chartBody.innerHTML = `
                <div style="display: flex; flex-direction: column; gap: var(--spacing-md);">
                    ${chatAnalyticsData.responseTime.map((item, index) => {
                        const percentage = (item.count / maxCount) * 100;
                        return `
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-xs);">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <div style="display: flex; align-items: center; gap: var(--spacing-md);">
                                        <div style="width: 12px; height: 12px; background: ${item.color}; border-radius: 2px;"></div>
                                        <span style="font-size: 13px; color: var(--text-primary);">${item.range}</span>
                                    </div>
                                    <span style="font-size: 13px; font-weight: 600; color: var(--text-primary);">${item.count}</span>
                                </div>
                                <div style="height: 8px; background: rgba(255, 255, 255, 0.04); border-radius: 4px; overflow: hidden;">
                                    <div style="height: 100%; width: ${percentage}%; background: ${item.color}; border-radius: 4px; transition: width 0.3s; animation: barGrow 0.5s ease-out ${index * 0.1}s both;"></div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            `;
        }

        // Render Recent Chats
        function renderRecentChats() {
            const tableBody = document.getElementById('recentChatsTable');
            if (!tableBody) return;

            tableBody.innerHTML = chatAnalyticsData.recentChats.map((chat, index) => {
                const statusColor = chat.status === 'active' ? '#66c61c' : 
                                   chat.status === 'resolved' ? '#2f78f6' : '#ffa500';
                const statusBg = chat.status === 'active' ? 'rgba(102, 198, 28, 0.2)' : 
                                 chat.status === 'resolved' ? 'rgba(47, 120, 246, 0.2)' : 'rgba(255, 165, 0, 0.2)';

                return `
                    <div class="table-row" style="cursor: pointer;" data-chat-index="${index}">
                        <div class="table-cell" style="flex: 1; display: flex; align-items: center; gap: 12px;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: ${statusColor}; flex-shrink: 0;"></div>
                            <div style="flex: 1;">
                                <div style="font-size: 14px; color: var(--text-primary); font-weight: 500;">${chat.user}</div>
                                <div style="font-size: 12px; color: var(--text-muted);">${chat.topic}</div>
                            </div>
                        </div>
                        <div class="table-cell" style="width: 120px; color: var(--text-muted); font-size: 12px;">
                            ${chat.time}
                        </div>
                        <div class="table-cell" style="width: 100px;">
                            <span style="padding: 2px 8px; background: ${statusBg}; border-radius: 4px; font-size: 11px; color: ${statusColor}; text-transform: capitalize;">
                                ${chat.status}
                            </span>
                        </div>
                    </div>
                `;
            }).join('');

            // Add click handlers
            tableBody.querySelectorAll('[data-chat-index]').forEach(row => {
                row.addEventListener('click', function() {
                    const index = this.dataset.chatIndex;
                    const chat = chatAnalyticsData.recentChats[index];
                    showToast(`Opening chat: ${chat.topic} with ${chat.user}`, 'info');
                });
            });
        }

        // Git Integration data
        const gitConfig = [
            { name: 'API Token', value: 'â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢', status: 'Active', editable: true },
            { name: 'Organization', value: '[GitLab organizaiton name]', status: 'Connected', editable: false },
            { name: 'Sync Interval', value: '5 minutes', status: 'Active', editable: true },
            { name: 'Auto-sync', value: 'Enabled', status: 'Active', editable: true }
        ];

        const webhooks = [
            { url: 'https://api.company.com/webhooks/gitlab', events: 'Push, Merge', status: 'Active', lastTriggered: '2 min ago' },
            { url: 'https://api.company.com/webhooks/reviews', events: 'Pull Request', status: 'Active', lastTriggered: '15 min ago' },
            { url: 'https://api.company.com/webhooks/notifications', events: 'All Events', status: 'Inactive', lastTriggered: '2 days ago' }
        ];

        // Render Git Section
        function renderGitSection() {
            renderGitConfig();
            renderWebhooks();
            initGitAccessToggles();
        }

        // Render Git Configuration
        function renderGitConfig() {
            const tableBody = document.getElementById('gitConfigTable');
            if (!tableBody) return;

            tableBody.innerHTML = gitConfig.map((config, index) => `
                <div class="table-row" data-config-index="${index}">
                    <div class="table-cell" style="flex: 1;">
                        <div style="font-size: 14px; color: var(--text-primary);">${config.name}</div>
                    </div>
                    <div class="table-cell" style="width: 200px; color: var(--text-muted);">
                        ${config.value}
                    </div>
                    <div class="table-cell" style="width: 150px;">
                        <div style="display: flex; align-items: center; gap: 8px;">
                            <div style="width: 8px; height: 8px; border-radius: 50%; background: ${config.status === 'Active' || config.status === 'Connected' ? 'var(--accent-success)' : 'var(--text-muted)'};"></div>
                            <span style="font-size: 13px; color: var(--text-primary);">${config.status}</span>
                        </div>
                    </div>
                    <div class="settings-button" data-config-settings="${index}" title="${config.editable ? 'Edit' : 'View'}" style="${!config.editable ? 'opacity: 0.5; cursor: default;' : ''}">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </div>
                </div>
            `).join('');

            // Add event listeners
            document.querySelectorAll('[data-config-settings]').forEach(btn => {
                btn.addEventListener('click', function() {
                    if (this.style.opacity === '0.5') return;
                    const index = this.dataset.configSettings;
                    const config = gitConfig[index];
                    if (config.editable) {
                        showGitConfigModal(index);
                    } else {
                        showToast(`Viewing ${config.name}`, 'info');
                    }
                });
            });
        }

        // Render Webhooks
        function renderWebhooks() {
            const tableBody = document.getElementById('webhooksTable');
            if (!tableBody) return;

            tableBody.innerHTML = webhooks.map((webhook, index) => {
                const statusColor = webhook.status === 'Active' ? '#66c61c' : '#a3a3a3';
                const statusBg = webhook.status === 'Active' ? 'rgba(102, 198, 28, 0.2)' : 'rgba(163, 163, 163, 0.2)';

                return `
                    <div class="table-row" data-webhook-index="${index}">
                        <div class="table-cell" style="flex: 1;">
                            <div style="font-size: 13px; color: var(--text-primary); font-family: monospace;">${webhook.url}</div>
                        </div>
                        <div class="table-cell" style="width: 150px; color: var(--text-muted); font-size: 12px;">
                            ${webhook.events}
                        </div>
                        <div class="table-cell" style="width: 120px;">
                            <span style="padding: 2px 8px; background: ${statusBg}; border-radius: 4px; font-size: 11px; color: ${statusColor};">
                                ${webhook.status}
                            </span>
                        </div>
                        <div class="table-cell" style="width: 150px; color: var(--text-muted); font-size: 12px;">
                            ${webhook.lastTriggered}
                        </div>
                        <div class="settings-button" data-webhook-settings="${index}" title="Settings">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5"/>
                                <path d="M8 2v2M8 12v2M2 8h2M12 8h2" stroke="currentColor" stroke-width="1.5"/>
                            </svg>
                        </div>
                    </div>
                `;
            }).join('');

            // Add event listeners
            document.querySelectorAll('[data-webhook-settings]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const index = this.dataset.webhookSettings;
                    showWebhookSettingsModal(index);
                });
            });
        }

        // Initialize Git Access Toggles
        function initGitAccessToggles() {
            document.querySelectorAll('[data-git-access]').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    const accessType = this.dataset.gitAccess;
                    document.querySelectorAll('[data-git-access]').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    showToast(`Repository access changed to: ${accessType === 'full' ? 'Full Access' : 'Selected Repositories'}`, 'success');
                });
            });
        }

        // Sync Git Integration
        function syncGitIntegration() {
            const syncButton = document.querySelector('[data-action="sync-git"]');
            const originalContent = syncButton.innerHTML;
            
            syncButton.disabled = true;
            syncButton.innerHTML = '<div class="loading"></div>';
            syncButton.style.opacity = '0.6';
            syncButton.style.cursor = 'not-allowed';

            setTimeout(() => {
                syncButton.innerHTML = originalContent;
                syncButton.disabled = false;
                syncButton.style.opacity = '1';
                syncButton.style.cursor = 'pointer';
                showToast('Git integration synced successfully', 'success');
                
                // Update last synced time
                const banner = document.querySelector('#git-section .config-banner');
                if (banner) {
                    const timeElement = banner.querySelector('div > div:last-child');
                    if (timeElement) {
                        timeElement.textContent = '[GitLab organizaiton name] â€¢ Last synced: Just now';
                    }
                }
            }, 1500);
        }

        // Disconnect Git Integration
        function disconnectGitIntegration() {
            if (confirm('Are you sure you want to disconnect Git integration? This will stop all automatic syncing.')) {
                showToast('Git integration disconnected', 'info');
                // Here you would implement actual disconnection logic
            }
        }

        // Show Git Config Modal
        function showGitConfigModal(index) {
            const config = gitConfig[index];
            showToast(`Edit ${config.name} functionality`, 'info');
        }

        // Show Add Webhook Modal
        function showAddWebhookModal() {
            const modal = document.getElementById('addWebhookModal');
            if (!modal) {
                createAddWebhookModal();
            }
            document.getElementById('addWebhookModal').classList.add('active');
            document.getElementById('webhookUrlInput').focus();
        }

        function createAddWebhookModal() {
            const modalHTML = `
                <div class="modal-overlay" id="addWebhookModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Add Webhook</div>
                            <div class="modal-close" onclick="closeAddWebhookModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="url" class="modal-input" id="webhookUrlInput" placeholder="https://api.example.com/webhook">
                            <div style="display: flex; flex-direction: column; gap: var(--spacing-xs);">
                                <label style="font-size: 12px; color: var(--text-muted); margin-bottom: var(--spacing-xs);">Select Events:</label>
                                <div style="display: flex; flex-direction: column; gap: var(--spacing-xs);">
                                    <label style="display: flex; align-items: center; gap: var(--spacing-md); cursor: pointer;">
                                        <input type="checkbox" value="push" checked style="cursor: pointer;">
                                        <span style="font-size: 13px; color: var(--text-primary);">Push Events</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: var(--spacing-md); cursor: pointer;">
                                        <input type="checkbox" value="merge" checked style="cursor: pointer;">
                                        <span style="font-size: 13px; color: var(--text-primary);">Merge Request Events</span>
                                    </label>
                                    <label style="display: flex; align-items: center; gap: var(--spacing-md); cursor: pointer;">
                                        <input type="checkbox" value="pr" style="cursor: pointer;">
                                        <span style="font-size: 13px; color: var(--text-primary);">Pull Request Events</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeAddWebhookModal()">Cancel</button>
                            <button class="button button-primary" onclick="addWebhook()">Add Webhook</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('addWebhookModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeAddWebhookModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('addWebhookModal').classList.contains('active')) {
                    closeAddWebhookModal();
                }
            });
        }

        function closeAddWebhookModal() {
            const modal = document.getElementById('addWebhookModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('webhookUrlInput').value = '';
                const checkboxes = modal.querySelectorAll('input[type="checkbox"]');
                checkboxes.forEach(cb => cb.checked = false);
                modal.querySelector('input[value="push"]').checked = true;
                modal.querySelector('input[value="merge"]').checked = true;
            }
        }

        function addWebhook() {
            const url = document.getElementById('webhookUrlInput').value.trim();
            if (!url) {
                showToast('Please enter a webhook URL', 'info');
                return;
            }

            const checkboxes = document.querySelectorAll('#addWebhookModal input[type="checkbox"]:checked');
            if (checkboxes.length === 0) {
                showToast('Please select at least one event type', 'info');
                return;
            }

            const events = Array.from(checkboxes).map(cb => {
                const labels = { 'push': 'Push', 'merge': 'Merge', 'pr': 'Pull Request' };
                return labels[cb.value] || cb.value;
            }).join(', ');

            const newWebhook = {
                url: url,
                events: events,
                status: 'Active',
                lastTriggered: 'Just now'
            };

            webhooks.unshift(newWebhook);
            renderWebhooks();
            closeAddWebhookModal();
            showToast('Webhook added successfully', 'success');
        }

        // Show Webhook Settings Modal
        function showWebhookSettingsModal(index) {
            const webhook = webhooks[index];
            showToast(`Settings for webhook: ${webhook.url}`, 'info');
        }

        // Subscription data
        const billingHistory = [
            { date: 'Nov 30, 2024', amount: '$299.00', status: 'Paid', invoice: 'INV-2024-11' },
            { date: 'Oct 30, 2024', amount: '$299.00', status: 'Paid', invoice: 'INV-2024-10' },
            { date: 'Sep 30, 2024', amount: '$299.00', status: 'Paid', invoice: 'INV-2024-09' },
            { date: 'Aug 30, 2024', amount: '$299.00', status: 'Paid', invoice: 'INV-2024-08' },
            { date: 'Jul 30, 2024', amount: '$299.00', status: 'Paid', invoice: 'INV-2024-07' }
        ];

        // Render Subscription Section
        function renderSubscriptionSection() {
            renderBillingHistory();
            initPlanCards();
        }

        // Render Billing History
        function renderBillingHistory() {
            const tableBody = document.getElementById('billingHistoryTable');
            if (!tableBody) return;

            tableBody.innerHTML = billingHistory.map((item, index) => {
                const statusColor = item.status === 'Paid' ? '#66c61c' : '#ff4d4d';
                const statusBg = item.status === 'Paid' ? 'rgba(102, 198, 28, 0.2)' : 'rgba(255, 77, 77, 0.2)';

                return `
                    <div class="table-row" data-billing-index="${index}">
                        <div class="table-cell" style="flex: 1; color: var(--text-primary); font-size: 13px;">
                            ${item.date}
                        </div>
                        <div class="table-cell" style="width: 150px; font-size: 14px; font-weight: 500; color: var(--text-primary);">
                            ${item.amount}
                        </div>
                        <div class="table-cell" style="width: 150px;">
                            <span style="padding: 2px 8px; background: ${statusBg}; border-radius: 4px; font-size: 11px; color: ${statusColor};">
                                ${item.status}
                            </span>
                        </div>
                        <div class="table-cell" style="width: 120px;">
                            <button class="button" style="height: 24px; padding: 0 var(--spacing-md); font-size: 11px;" data-action="download-invoice" data-invoice="${item.invoice}">
                                Download
                            </button>
                        </div>
                        <div style="width: 24px;"></div>
                    </div>
                `;
            }).join('');

            // Add invoice download handlers
            document.querySelectorAll('[data-action="download-invoice"]').forEach(btn => {
                btn.addEventListener('click', function() {
                    const invoice = this.dataset.invoice;
                    showToast(`Downloading invoice: ${invoice}`, 'info');
                });
            });
        }

        // Initialize Plan Cards
        function initPlanCards() {
            document.querySelectorAll('.plan-card').forEach(card => {
                card.addEventListener('click', function() {
                    if (this.classList.contains('active')) return;
                    const plan = this.dataset.plan;
                    showChangePlanModal(plan);
                });
            });
        }

        // Show Update Billing Modal
        function showUpdateBillingModal() {
            const modal = document.getElementById('updateBillingModal');
            if (!modal) {
                createUpdateBillingModal();
            }
            document.getElementById('updateBillingModal').classList.add('active');
        }

        function createUpdateBillingModal() {
            const modalHTML = `
                <div class="modal-overlay" id="updateBillingModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Update Payment Method</div>
                            <div class="modal-close" onclick="closeUpdateBillingModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="cardNumberInput" placeholder="Card Number" maxlength="19">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
                                <input type="text" class="modal-input" id="expiryInput" placeholder="MM/YY" maxlength="5">
                                <input type="text" class="modal-input" id="cvvInput" placeholder="CVV" maxlength="4">
                            </div>
                            <input type="text" class="modal-input" id="cardNameInput" placeholder="Cardholder Name">
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeUpdateBillingModal()">Cancel</button>
                            <button class="button button-primary" onclick="updatePaymentMethod()">Update Payment Method</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('updateBillingModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeUpdateBillingModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('updateBillingModal').classList.contains('active')) {
                    closeUpdateBillingModal();
                }
            });

            // Format card number input
            document.getElementById('cardNumberInput').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\s/g, '');
                value = value.match(/.{1,4}/g)?.join(' ') || value;
                e.target.value = value;
            });

            // Format expiry input
            document.getElementById('expiryInput').addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                if (value.length >= 2) {
                    value = value.substring(0, 2) + '/' + value.substring(2, 4);
                }
                e.target.value = value;
            });
        }

        function closeUpdateBillingModal() {
            const modal = document.getElementById('updateBillingModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('cardNumberInput').value = '';
                document.getElementById('expiryInput').value = '';
                document.getElementById('cvvInput').value = '';
                document.getElementById('cardNameInput').value = '';
            }
        }

        function updatePaymentMethod() {
            const cardNumber = document.getElementById('cardNumberInput').value.trim();
            const expiry = document.getElementById('expiryInput').value.trim();
            const cvv = document.getElementById('cvvInput').value.trim();
            const cardName = document.getElementById('cardNameInput').value.trim();

            if (!cardNumber || !expiry || !cvv || !cardName) {
                showToast('Please fill in all payment details', 'info');
                return;
            }

            closeUpdateBillingModal();
            showToast('Payment method updated successfully', 'success');
        }

        // Show Edit Address Modal
        function showEditAddressModal() {
            const modal = document.getElementById('editAddressModal');
            if (!modal) {
                createEditAddressModal();
            }
            document.getElementById('editAddressModal').classList.add('active');
            document.getElementById('addressInput').focus();
        }

        function createEditAddressModal() {
            const modalHTML = `
                <div class="modal-overlay" id="editAddressModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Edit Billing Address</div>
                            <div class="modal-close" onclick="closeEditAddressModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="addressInput" placeholder="Street Address" value="123 Main St">
                            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: var(--spacing-md);">
                                <input type="text" class="modal-input" id="cityInput" placeholder="City" value="City">
                                <input type="text" class="modal-input" id="stateInput" placeholder="State" value="State">
                            </div>
                            <input type="text" class="modal-input" id="zipInput" placeholder="ZIP Code" value="12345">
                            <select class="modal-input" id="countryInput" style="height: 32px; cursor: pointer;">
                                <option>United States</option>
                                <option>Canada</option>
                                <option>United Kingdom</option>
                                <option>Germany</option>
                                <option>Other</option>
                            </select>
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeEditAddressModal()">Cancel</button>
                            <button class="button button-primary" onclick="saveAddress()">Save Address</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('editAddressModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeEditAddressModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('editAddressModal').classList.contains('active')) {
                    closeEditAddressModal();
                }
            });
        }

        function closeEditAddressModal() {
            const modal = document.getElementById('editAddressModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function saveAddress() {
            const address = document.getElementById('addressInput').value.trim();
            const city = document.getElementById('cityInput').value.trim();
            const state = document.getElementById('stateInput').value.trim();
            const zip = document.getElementById('zipInput').value.trim();

            if (!address || !city || !state || !zip) {
                showToast('Please fill in all address fields', 'info');
                return;
            }

            closeEditAddressModal();
            showToast('Billing address updated successfully', 'success');
        }

        // Show Change Plan Modal
        function showChangePlanModal(planType) {
            const plans = {
                'basic': { name: 'Basic', price: '$99', monthly: true },
                'developer': { name: '10X DEVELOPER', price: '$299', monthly: true },
                'enterprise': { name: 'Enterprise', price: 'Custom', monthly: false }
            };

            const plan = plans[planType] || plans['basic'];
            
            if (planType === 'enterprise') {
                showToast('Please contact sales for Enterprise plan', 'info');
                return;
            }

            if (confirm(`Are you sure you want to change to ${plan.name} plan (${plan.price}/month)?`)) {
                showToast(`Plan changed to ${plan.name}`, 'success');
                // Here you would implement actual plan change logic
            }
        }

        // Show Cancel Subscription Modal
        function showCancelSubscriptionModal() {
            const modal = document.getElementById('cancelSubscriptionModal');
            if (!modal) {
                createCancelSubscriptionModal();
            }
            document.getElementById('cancelSubscriptionModal').classList.add('active');
        }

        function createCancelSubscriptionModal() {
            const modalHTML = `
                <div class="modal-overlay" id="cancelSubscriptionModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Cancel Subscription</div>
                            <div class="modal-close" onclick="closeCancelSubscriptionModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div style="font-size: 14px; color: var(--text-primary); margin-bottom: var(--spacing-md);">
                                Are you sure you want to cancel your subscription? Your access will continue until the end of your current billing period (December 31, 2024).
                            </div>
                            <div style="padding: var(--spacing-md); background: rgba(255, 77, 77, 0.1); border: 1px solid rgba(255, 77, 77, 0.3); border-radius: var(--radius-sm);">
                                <div style="font-size: 12px; color: #ff4d4d; font-weight: 500;">Warning: This action cannot be undone.</div>
                            </div>
                            <div style="margin-top: var(--spacing-md);">
                                <label style="display: flex; align-items: center; gap: var(--spacing-md); cursor: pointer;">
                                    <input type="checkbox" id="confirmCancel" style="cursor: pointer;">
                                    <span style="font-size: 13px; color: var(--text-primary);">I understand and want to cancel my subscription</span>
                                </label>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeCancelSubscriptionModal()">Keep Subscription</button>
                            <button class="button" onclick="confirmCancelSubscription()" style="background: rgba(255, 77, 77, 0.2); border-color: #ff4d4d; color: #ff4d4d;">
                                Cancel Subscription
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('cancelSubscriptionModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeCancelSubscriptionModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('cancelSubscriptionModal').classList.contains('active')) {
                    closeCancelSubscriptionModal();
                }
            });
        }

        function closeCancelSubscriptionModal() {
            const modal = document.getElementById('cancelSubscriptionModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('confirmCancel').checked = false;
            }
        }

        function confirmCancelSubscription() {
            const confirmed = document.getElementById('confirmCancel').checked;
            if (!confirmed) {
                showToast('Please confirm cancellation', 'info');
                return;
            }

            closeCancelSubscriptionModal();
            showToast('Subscription will be cancelled at the end of the billing period', 'info');
        }

        // Help Section data
        const faqData = [
            {
                question: 'How do I connect my Git repository?',
                answer: 'To connect your Git repository, go to the Git Integration section in the sidebar. Click "Connect" and follow the instructions to authorize access to your repository. You can connect repositories from GitLab, GitHub, or Bitbucket.'
            },
            {
                question: 'How does the code review AI work?',
                answer: 'Our AI analyzes your code for quality, security, performance, and best practices. It uses machine learning models trained on millions of code reviews to provide accurate and helpful feedback. You can customize review rules in the Review Rules section.'
            },
            {
                question: 'Can I customize review rules?',
                answer: 'Yes! Go to the Review Rules section to create custom rules. You can set rules for code quality, security checks, performance optimization, and documentation requirements. Rules can be enabled or disabled for specific repositories.'
            },
            {
                question: 'How do I add team members?',
                answer: 'Navigate to the Manage Users section and click "Add User". Enter the user\'s email address and assign them a role (Admin, Reviewer, or Viewer). They will receive an invitation email to join your organization.'
            },
            {
                question: 'What analytics are available?',
                answer: 'The Analytics dashboard provides insights into code review metrics, including total reviews, average review time, approval rates, top reviewers, and review type distribution. You can filter data by time period and export reports.'
            },
            {
                question: 'How do I change my subscription plan?',
                answer: 'Go to the Manage Subscription section and select a new plan from the available options. Changes will take effect at the start of your next billing cycle. You can upgrade or downgrade at any time.'
            }
        ];

        // Render Help Section
        function renderHelpSection() {
            renderFAQ();
            initHelpSearch();
        }

        // Render FAQ
        function renderFAQ() {
            const faqList = document.getElementById('faqList');
            if (!faqList) return;

            faqList.innerHTML = faqData.map((faq, index) => `
                <div class="faq-item" data-faq-index="${index}">
                    <div class="faq-question">
                        <span>${faq.question}</span>
                        <svg class="faq-icon" width="16" height="16" viewBox="0 0 16 16" fill="none">
                            <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="faq-answer">${faq.answer}</div>
                </div>
            `).join('');

            // Add click handlers
            document.querySelectorAll('.faq-item').forEach(item => {
                item.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
        }

        // Initialize Help Search
        function initHelpSearch() {
            const searchInput = document.getElementById('helpSearchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    const query = e.target.value.toLowerCase();
                    if (query.length > 0) {
                        // Filter FAQ items
                        document.querySelectorAll('.faq-item').forEach(item => {
                            const question = item.querySelector('.faq-question span').textContent.toLowerCase();
                            const answer = item.querySelector('.faq-answer').textContent.toLowerCase();
                            if (question.includes(query) || answer.includes(query)) {
                                item.style.display = 'block';
                            } else {
                                item.style.display = 'none';
                            }
                        });
                    } else {
                        document.querySelectorAll('.faq-item').forEach(item => {
                            item.style.display = 'block';
                        });
                    }
                });
            }
        }

        // Settings Section
        function renderSettingsSection() {
            initSettingsToggles();
            initSettingsSelects();
        }

        // Initialize Settings Toggles
        function initSettingsToggles() {
            document.querySelectorAll('[data-setting]').forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    const setting = this.dataset.setting;
                    showToast(`${setting.replace(/-/g, ' ')} ${this.classList.contains('active') ? 'enabled' : 'disabled'}`, 'success');
                });
            });
        }

        // Initialize Settings Selects
        function initSettingsSelects() {
            const languageSelect = document.getElementById('languageSelect');
            const themeSelect = document.getElementById('themeSelect');
            const timezoneSelect = document.getElementById('timezoneSelect');

            if (languageSelect) {
                languageSelect.addEventListener('change', function() {
                    showToast(`Language changed to ${this.value}`, 'success');
                });
            }

            if (themeSelect) {
                themeSelect.addEventListener('change', function() {
                    showToast(`Theme changed to ${this.value}`, 'success');
                });
            }

            if (timezoneSelect) {
                timezoneSelect.addEventListener('change', function() {
                    showToast(`Timezone changed to ${this.value}`, 'success');
                });
            }
        }

        // Save Settings
        function saveSettings() {
            const language = document.getElementById('languageSelect')?.value;
            const theme = document.getElementById('themeSelect')?.value;
            const timezone = document.getElementById('timezoneSelect')?.value;
            
            const emailNotifications = document.querySelector('[data-setting="email-notifications"]')?.classList.contains('active');
            const pushNotifications = document.querySelector('[data-setting="push-notifications"]')?.classList.contains('active');
            const reviewAlerts = document.querySelector('[data-setting="review-alerts"]')?.classList.contains('active');
            const weeklyReports = document.querySelector('[data-setting="weekly-reports"]')?.classList.contains('active');

            showToast('Settings saved successfully', 'success');
        }

        // Show Change Password Modal
        function showChangePasswordModal() {
            const modal = document.getElementById('changePasswordModal');
            if (!modal) {
                createChangePasswordModal();
            }
            document.getElementById('changePasswordModal').classList.add('active');
            document.getElementById('currentPasswordInput').focus();
        }

        function createChangePasswordModal() {
            const modalHTML = `
                <div class="modal-overlay" id="changePasswordModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Change Password</div>
                            <div class="modal-close" onclick="closeChangePasswordModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="password" class="modal-input" id="currentPasswordInput" placeholder="Current Password">
                            <input type="password" class="modal-input" id="newPasswordInput" placeholder="New Password">
                            <input type="password" class="modal-input" id="confirmPasswordInput" placeholder="Confirm New Password">
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeChangePasswordModal()">Cancel</button>
                            <button class="button button-primary" onclick="updatePassword()">Change Password</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('changePasswordModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeChangePasswordModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('changePasswordModal').classList.contains('active')) {
                    closeChangePasswordModal();
                }
            });
        }

        function closeChangePasswordModal() {
            const modal = document.getElementById('changePasswordModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('currentPasswordInput').value = '';
                document.getElementById('newPasswordInput').value = '';
                document.getElementById('confirmPasswordInput').value = '';
            }
        }

        function updatePassword() {
            const current = document.getElementById('currentPasswordInput').value.trim();
            const newPass = document.getElementById('newPasswordInput').value.trim();
            const confirm = document.getElementById('confirmPasswordInput').value.trim();

            if (!current || !newPass || !confirm) {
                showToast('Please fill in all password fields', 'info');
                return;
            }

            if (newPass !== confirm) {
                showToast('New passwords do not match', 'info');
                return;
            }

            if (newPass.length < 8) {
                showToast('Password must be at least 8 characters', 'info');
                return;
            }

            closeChangePasswordModal();
            showToast('Password changed successfully', 'success');
        }

        // Show Sessions Modal
        function showSessionsModal() {
            const modal = document.getElementById('sessionsModal');
            if (!modal) {
                createSessionsModal();
            }
            document.getElementById('sessionsModal').classList.add('active');
        }

        function createSessionsModal() {
            const sessions = [
                { device: 'Chrome on Windows', location: 'New York, USA', lastActive: 'Active now', current: true },
                { device: 'Safari on Mac', location: 'San Francisco, USA', lastActive: '2 hours ago', current: false },
                { device: 'Firefox on Linux', location: 'London, UK', lastActive: '1 day ago', current: false }
            ];

            const modalHTML = `
                <div class="modal-overlay" id="sessionsModal">
                    <div class="modal" style="max-width: 600px;">
                        <div class="modal-header">
                            <div class="modal-title">Active Sessions</div>
                            <div class="modal-close" onclick="closeSessionsModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            ${sessions.map((session, index) => `
                                <div style="display: flex; justify-content: space-between; align-items: center; padding: var(--spacing-md); background: rgba(255, 255, 255, 0.02); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
                                    <div>
                                        <div style="font-size: 14px; font-weight: 500; color: var(--text-primary);">
                                            ${session.device} ${session.current ? '<span style="color: var(--accent-success);">(Current)</span>' : ''}
                                        </div>
                                        <div style="font-size: 12px; color: var(--text-muted); margin-top: 2px;">
                                            ${session.location} â€¢ ${session.lastActive}
                                        </div>
                                    </div>
                                    ${!session.current ? `<button class="button" onclick="revokeSession(${index})" style="height: 28px;">Revoke</button>` : ''}
                                </div>
                            `).join('')}
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeSessionsModal()">Close</button>
                            <button class="button" onclick="revokeAllSessions()" style="background: rgba(255, 77, 77, 0.1); border-color: #ff4d4d; color: #ff4d4d;">
                                Revoke All Other Sessions
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('sessionsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeSessionsModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('sessionsModal').classList.contains('active')) {
                    closeSessionsModal();
                }
            });
        }

        function closeSessionsModal() {
            const modal = document.getElementById('sessionsModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function revokeSession(index) {
            showToast('Session revoked', 'success');
        }

        function revokeAllSessions() {
            if (confirm('Are you sure you want to revoke all other sessions?')) {
                showToast('All other sessions revoked', 'success');
                closeSessionsModal();
            }
        }

        // Show Edit Profile Modal
        function showEditProfileModal() {
            const modal = document.getElementById('editProfileModal');
            if (!modal) {
                createEditProfileModal();
            }
            document.getElementById('editProfileModal').classList.add('active');
            document.getElementById('profileNameInput').focus();
        }

        function createEditProfileModal() {
            const modalHTML = `
                <div class="modal-overlay" id="editProfileModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Edit Profile</div>
                            <div class="modal-close" onclick="closeEditProfileModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <input type="text" class="modal-input" id="profileNameInput" placeholder="Full Name" value="John Doe">
                            <input type="email" class="modal-input" id="profileEmailInput" placeholder="Email" value="john.doe@company.com">
                            <input type="text" class="modal-input" id="profileCompanyInput" placeholder="Company" value="Company Name">
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeEditProfileModal()">Cancel</button>
                            <button class="button button-primary" onclick="saveProfile()">Save Changes</button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('editProfileModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeEditProfileModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('editProfileModal').classList.contains('active')) {
                    closeEditProfileModal();
                }
            });
        }

        function closeEditProfileModal() {
            const modal = document.getElementById('editProfileModal');
            if (modal) {
                modal.classList.remove('active');
            }
        }

        function saveProfile() {
            const name = document.getElementById('profileNameInput').value.trim();
            const email = document.getElementById('profileEmailInput').value.trim();
            const company = document.getElementById('profileCompanyInput').value.trim();

            if (!name || !email) {
                showToast('Please fill in name and email', 'info');
                return;
            }

            closeEditProfileModal();
            showToast('Profile updated successfully', 'success');
        }

        // Show Delete Account Modal
        function showDeleteAccountModal() {
            const modal = document.getElementById('deleteAccountModal');
            if (!modal) {
                createDeleteAccountModal();
            }
            document.getElementById('deleteAccountModal').classList.add('active');
        }

        function createDeleteAccountModal() {
            const modalHTML = `
                <div class="modal-overlay" id="deleteAccountModal">
                    <div class="modal">
                        <div class="modal-header">
                            <div class="modal-title">Delete Account</div>
                            <div class="modal-close" onclick="closeDeleteAccountModal()">
                                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                    <path d="M12 4L4 12M4 4l8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="modal-body">
                            <div style="font-size: 14px; color: var(--text-primary); margin-bottom: var(--spacing-md);">
                                Are you sure you want to delete your account? This action cannot be undone. All your data will be permanently deleted.
                            </div>
                            <div style="padding: var(--spacing-md); background: rgba(255, 77, 77, 0.1); border: 1px solid rgba(255, 77, 77, 0.3); border-radius: var(--radius-sm); margin-bottom: var(--spacing-md);">
                                <div style="font-size: 12px; color: #ff4d4d; font-weight: 500;">Warning: This action is permanent and irreversible.</div>
                            </div>
                            <input type="text" class="modal-input" id="confirmDeleteInput" placeholder="Type 'DELETE' to confirm">
                        </div>
                        <div class="modal-footer">
                            <button class="button" onclick="closeDeleteAccountModal()">Cancel</button>
                            <button class="button" onclick="confirmDeleteAccount()" style="background: rgba(255, 77, 77, 0.2); border-color: #ff4d4d; color: #ff4d4d;">
                                Delete Account
                            </button>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            document.getElementById('deleteAccountModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeDeleteAccountModal();
                }
            });

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && document.getElementById('deleteAccountModal').classList.contains('active')) {
                    closeDeleteAccountModal();
                }
            });
        }

        function closeDeleteAccountModal() {
            const modal = document.getElementById('deleteAccountModal');
            if (modal) {
                modal.classList.remove('active');
                document.getElementById('confirmDeleteInput').value = '';
            }
        }

        function confirmDeleteAccount() {
            const confirm = document.getElementById('confirmDeleteInput').value.trim();
            if (confirm !== 'DELETE') {
                showToast('Please type DELETE to confirm', 'info');
                return;
            }

            closeDeleteAccountModal();
            showToast('Account deletion request submitted', 'info');
        }
    </script>
</body>
</html>
